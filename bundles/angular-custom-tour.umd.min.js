!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("@angular/common"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common","rxjs/Subject"],e):"object"==typeof exports?exports["angular-custom-tour"]=e(require("@angular/core"),require("@angular/common"),require("rxjs/Subject")):t["angular-custom-tour"]=e(t["@angular/core"],t["@angular/common"],t["rxjs/Subject"])}(this,function(t,e,i){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=4)}([function(e,i){e.exports=t},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),r=i(9),s=i(7),c=function(){function t(){this.anchors={},this.overlay$=new r.Subject,this.registration$=new r.Subject,this.finish$=new r.Subject,this.showingStep$=new r.Subject}return t.prototype.initialize=function(t,e){this.hintOptions=Object.assign(new s.HintOptions,t||new s.HintOptions);var i=document.getElementsByTagName(this.hintOptions.stepTag);this.steps=this.initSteps(i);var n;this.steps.some(function(t,i){if(t.order===e)return n=i,!0}),null==n&&(n=0),this.startAt(n),this.overlay$.next(!0)},t.prototype.show=function(t){var e=this.anchors[t.selector];e&&e.showStep()},t.prototype.showNext=function(){this.currentStep=this.steps[this.steps.indexOf(this.currentStep)+1];var t=this.anchors[this.currentStep.selector];t&&t.showStep()},t.prototype.overlayNext=function(){this.hasNext()?(this.anchors[this.currentStep.selector].hideStep(),this.showNext()):this.end()},t.prototype.showPrev=function(){this.currentStep=this.steps[this.steps.indexOf(this.currentStep)-1];var t=this.anchors[this.currentStep.selector];t&&t.showStep()},t.prototype.register=function(t,e){if(this.anchors[t])throw"selector "+t+" already registered!";this.anchors[t]=e,this.registration$.next(!0)},t.prototype.hasNext=function(){return this.steps.indexOf(this.currentStep)<this.steps.length-1},t.prototype.hasPrev=function(){return this.steps.indexOf(this.currentStep)>0},t.prototype.end=function(){this.overlay$.next(!1);var t=this.anchors[this.currentStep.selector];t&&(this.currentStep=void 0,t.hideStep(),this.finish$.next(!0))},t.prototype.startAt=function(t){this.currentStep=this.steps[t],this.show(this.currentStep)},t.prototype.initSteps=function(t){for(var e=[],i=0;i<t.length;i++)e.push({selector:t[i].getAttribute("selector"),order:+t[i].getAttribute("order")||this.hintOptions.defaultOrder});return e=e.sort(function(t,e){return t.order-e.order})},t.prototype.putOverlay=function(){document.getElementsByTagName("body")},t=n([o.Injectable()],t)}();e.HintService=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HintConfig={HINT_TAG:"tour-step",DEFAULT_POSITION:"bottom",Z_INDEX:"999",DEFAULT_ORDER:99,DEFAULT_PX_LAYER:15,APPLY_RELATIVE:!0,DISMISS_ON_OVERLAY:!1}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.HintService=o.HintService;var r=i(8),s=i(0),c=i(5),h=i(6);e.TourComponent=h.TourComponent;var a=function(){function t(){}return e=t,t.forRoot=function(){return{ngModule:e,providers:[o.HintService]}},t=e=n([s.NgModule({declarations:[c.HintComponent,h.TourComponent],exports:[c.HintComponent,h.TourComponent],imports:[r.CommonModule]})],t);var e}();e.HintModule=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(3))},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=i(0),c=function(){function t(t){var e=this;this.hintService=t,this.hintService.overlay$.subscribe(function(t){return e.show=t})}return t.prototype.dismiss=function(){this.hintService.hintOptions.dismissOnOverlay&&this.hintService.overlayNext()},t=n([s.Component({selector:"tour-overlay",template:'<div class="hint-overlay" *ngIf="show" (click)="dismiss()"></div>'}),o("design:paramtypes",[r.HintService])],t)}();e.HintComponent=c},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(1),c=i(2),h=function(){function t(t){this.hintService=t,this.nextEventEmitter=new r.EventEmitter,this.prevEventEmitter=new r.EventEmitter,this.exitEventEmitter=new r.EventEmitter}return t.prototype.ngOnInit=function(){this.hintService.register(this.selector,this)},t.prototype.showStep=function(){this.hintService.showingStep$.next(this),this.position=this.position||this.hintService.hintOptions.defaultPosition,this.order=+this.order||this.hintService.hintOptions.defaultOrder;var t=document.getElementById(this.selector);if(t)switch(t.style.zIndex=c.HintConfig.Z_INDEX,this.hintService.hintOptions.elementsDisabled&&this.disableClick(t),this.hintService.hintOptions.applyRelative&&t.classList.add("hint-relative"),this.position){case"top":this.transformClass="transformX_50 transformY_100",this.topPos=t.offsetTop-this.hintService.hintOptions.defaultLayer,this.leftPos=t.offsetLeft+t.offsetWidth/2;break;case"bottom":this.transformClass="transformX_50",this.topPos=t.offsetTop+t.offsetHeight+this.hintService.hintOptions.defaultLayer,this.leftPos=t.offsetLeft+t.offsetWidth/2;break;case"left":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft-this.hintService.hintOptions.defaultLayer,this.transformClass="transformY_50 transformX_100";break;case"right":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft+t.offsetWidth+this.hintService.hintOptions.defaultLayer,this.transformClass="transformY_50";break;case"neutral":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft+t.offsetWidth+this.hintService.hintOptions.defaultLayer,this.transformClass=this.customCss;break;default:throw"Invalid hint position ->"+this.position}else this.topPos=0,this.leftPos=0;this.showme=!0,this.hasNext=this.hintService.hasNext(),this.hasPrev=this.hintService.hasPrev()},t.prototype.hideStep=function(){var t=document.getElementById(this.selector);t&&(t.style.zIndex="0",this.enableClick(t),t.classList.remove("hint-relative")),this.showme=!1},t.prototype.exit=function(){this.exitEventEmitter.emit(),this.hintService.end()},t.prototype.next=function(){this.nextEventEmitter.emit(),this.hideStep(),this.hintService.showNext()},t.prototype.prev=function(){this.prevEventEmitter.emit(),this.hideStep(),this.hintService.showPrev()},t.prototype.disableClick=function(t){t.classList.add("hint-disabled")},t.prototype.enableClick=function(t){t.classList.remove("hint-disabled")},n([r.Input(),o("design:type",String)],t.prototype,"title",void 0),n([r.Input(),o("design:type",String)],t.prototype,"selector",void 0),n([r.Input(),o("design:type",Number)],t.prototype,"order",void 0),n([r.Input(),o("design:type",String)],t.prototype,"position",void 0),n([r.Input(),o("design:type",String)],t.prototype,"customCss",void 0),n([r.Output(),o("design:type",r.EventEmitter)],t.prototype,"nextEventEmitter",void 0),n([r.Output(),o("design:type",r.EventEmitter)],t.prototype,"prevEventEmitter",void 0),n([r.Output(),o("design:type",r.EventEmitter)],t.prototype,"exitEventEmitter",void 0),t=n([r.Component({selector:c.HintConfig.HINT_TAG,template:'<div class="intro-tour-hint-wrapper {{transformClass}} step{{order}} {{position}}"\n  *ngIf="showme" [ngStyle]="{\'top\': topPos+\'px\', \'left\': leftPos+\'px\'}" >\n    <div class="header" *ngIf="title">{{title}}</div>\n    <div class="content"><ng-content></ng-content></div>\n    <div class="footer">\n      <a class="navigate-btn prev" *ngIf="hasPrev" (click)="prev()">&#8592;</a>\n      <a class="navigate-btn next" *ngIf="hasNext" (click)="next()">&#8594;</a>\n      <a class="navigate-btn exit" (click)="exit()">&#10006;</a>\n    </div>\n  </div>'}),o("design:paramtypes",[s.HintService])],t)}();e.TourComponent=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(){function t(){this.elementsDisabled=!0,this.defaultPosition=n.HintConfig.DEFAULT_POSITION,this.defaultOrder=n.HintConfig.DEFAULT_ORDER,this.defaultLayer=n.HintConfig.DEFAULT_PX_LAYER,this.applyRelative=n.HintConfig.APPLY_RELATIVE,this.stepTag=n.HintConfig.HINT_TAG,this.dismissOnOverlay=n.HintConfig.DISMISS_ON_OVERLAY}return t}();e.HintOptions=o},function(t,i){t.exports=e},function(t,e){t.exports=i}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9hbmd1bGFyLWN1c3RvbS10b3VyLnVtZC5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDRmMjcxMjA4N2QyOTIxZGIyOTY5Iiwid2VicGFjazovLy9leHRlcm5hbCBcIkBhbmd1bGFyL2NvcmVcIiIsIndlYnBhY2s6Ly8vLi9zcmMvaGludC5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy92YXJpYWJsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9oaW50LmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50cm8tdG91ci90b3VyLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvb3B0aW9ucy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYW5ndWxhci9jb21tb25cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyeGpzL1N1YmplY3RcIiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19kZWNvcmF0ZSIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImNvcmVfMSIsIlN1YmplY3RfMSIsIm9wdGlvbnNfMSIsIkhpbnRTZXJ2aWNlIiwiYW5jaG9ycyIsIm92ZXJsYXkkIiwiU3ViamVjdCIsInJlZ2lzdHJhdGlvbiQiLCJmaW5pc2gkIiwic2hvd2luZ1N0ZXAkIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJzdGFydE9yZGVyIiwiaGludE9wdGlvbnMiLCJhc3NpZ24iLCJIaW50T3B0aW9ucyIsIm5vZGVzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0ZXBUYWciLCJzdGVwcyIsImluaXRTdGVwcyIsInN0YXJ0U3RlcEluZGV4Iiwic29tZSIsInN0ZXAiLCJpbmRleCIsIm9yZGVyIiwic3RhcnRBdCIsIm5leHQiLCJzaG93IiwiYW5jaG9yIiwic2VsZWN0b3IiLCJzaG93U3RlcCIsInNob3dOZXh0IiwiY3VycmVudFN0ZXAiLCJpbmRleE9mIiwib3ZlcmxheU5leHQiLCJoYXNOZXh0IiwiaGlkZVN0ZXAiLCJlbmQiLCJzaG93UHJldiIsInJlZ2lzdGVyIiwiY29tcG9uZW50IiwiaGFzUHJldiIsInVuZGVmaW5lZCIsInN0ZXBJZCIsInB1c2giLCJnZXRBdHRyaWJ1dGUiLCJkZWZhdWx0T3JkZXIiLCJzb3J0IiwiZWwxIiwiZWwyIiwicHV0T3ZlcmxheSIsIkluamVjdGFibGUiLCJIaW50Q29uZmlnIiwiSElOVF9UQUciLCJERUZBVUxUX1BPU0lUSU9OIiwiWl9JTkRFWCIsIkRFRkFVTFRfT1JERVIiLCJERUZBVUxUX1BYX0xBWUVSIiwiQVBQTFlfUkVMQVRJVkUiLCJESVNNSVNTX09OX09WRVJMQVkiLCJoaW50X3NlcnZpY2VfMSIsImNvbW1vbl8xIiwiaGludF9jb21wb25lbnRfMSIsInRvdXJfY29tcG9uZW50XzEiLCJUb3VyQ29tcG9uZW50IiwiSGludE1vZHVsZSIsIkhpbnRNb2R1bGVfMSIsImZvclJvb3QiLCJuZ01vZHVsZSIsInByb3ZpZGVycyIsIk5nTW9kdWxlIiwiZGVjbGFyYXRpb25zIiwiSGludENvbXBvbmVudCIsImltcG9ydHMiLCJDb21tb25Nb2R1bGUiLCJfX21ldGFkYXRhIiwiayIsInYiLCJtZXRhZGF0YSIsImhpbnRTZXJ2aWNlIiwiX3RoaXMiLCJzdWJzY3JpYmUiLCJkYXRhIiwiZGlzbWlzcyIsImRpc21pc3NPbk92ZXJsYXkiLCJDb21wb25lbnQiLCJ0ZW1wbGF0ZSIsInZhcmlhYmxlc18xIiwibmV4dEV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInByZXZFdmVudEVtaXR0ZXIiLCJleGl0RXZlbnRFbWl0dGVyIiwibmdPbkluaXQiLCJwb3NpdGlvbiIsImRlZmF1bHRQb3NpdGlvbiIsImhpZ2hsaWdodGVkRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJ6SW5kZXgiLCJlbGVtZW50c0Rpc2FibGVkIiwiZGlzYWJsZUNsaWNrIiwiYXBwbHlSZWxhdGl2ZSIsImNsYXNzTGlzdCIsImFkZCIsInRyYW5zZm9ybUNsYXNzIiwidG9wUG9zIiwib2Zmc2V0VG9wIiwiZGVmYXVsdExheWVyIiwibGVmdFBvcyIsIm9mZnNldExlZnQiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsImN1c3RvbUNzcyIsInNob3dtZSIsImVuYWJsZUNsaWNrIiwicmVtb3ZlIiwiZXhpdCIsImVtaXQiLCJwcmV2IiwiZWxlbWVudCIsIklucHV0IiwiU3RyaW5nIiwiTnVtYmVyIiwiT3V0cHV0Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLGlCQUFBQSxRQUFBLG1CQUFBQSxRQUFBLGlCQUNBLGtCQUFB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LEtBQUEwRixhQUFBeUMsRUFBQW5DLFdBQUFJLGNBQ0FwRyxLQUFBdUosYUFBQXBCLEVBQUFuQyxXQUFBSyxpQkFDQXJHLEtBQUFpSixjQUFBZCxFQUFBbkMsV0FBQU0sZUFDQXRHLEtBQUE2RCxRQUFBc0UsRUFBQW5DLFdBQUFDLFNBQ0FqRyxLQUFBZ0ksaUJBQUFHLEVBQUFuQyxXQUFBTyxtQkFFQSxNQUFBOUMsS0FFQTlELEdBQUE4RCxlVGdpQk0sU0FBVTdELEVBQVFELEdVL2lCeEJDLEVBQUFELFFBQUFPLEdWcWpCTSxTQUFVTixFQUFRRCxHV3JqQnhCQyxFQUFBRCxRQUFBUSIsImZpbGUiOiJhbmd1bGFyLWN1c3RvbS10b3VyLnVtZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBhbmd1bGFyL2NvcmVcIiwgXCJAYW5ndWxhci9jb21tb25cIiwgXCJyeGpzL1N1YmplY3RcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1jdXN0b20tdG91clwiXSA9IGZhY3RvcnkocmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIiksIHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIiksIHJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImFuZ3VsYXItY3VzdG9tLXRvdXJcIl0gPSBmYWN0b3J5KHJvb3RbXCJAYW5ndWxhci9jb3JlXCJdLCByb290W1wiQGFuZ3VsYXIvY29tbW9uXCJdLCByb290W1wicnhqcy9TdWJqZWN0XCJdKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKSwgcmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAYW5ndWxhci9jb3JlXCIsIFwiQGFuZ3VsYXIvY29tbW9uXCIsIFwicnhqcy9TdWJqZWN0XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImFuZ3VsYXItY3VzdG9tLXRvdXJcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmd1bGFyLWN1c3RvbS10b3VyXCJdID0gZmFjdG9yeShyb290W1wiQGFuZ3VsYXIvY29yZVwiXSwgcm9vdFtcIkBhbmd1bGFyL2NvbW1vblwiXSwgcm9vdFtcInJ4anMvU3ViamVjdFwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxudmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XHJcbnZhciBvcHRpb25zXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG52YXIgSGludFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIaW50U2VydmljZSgpIHtcclxuICAgICAgICB0aGlzLmFuY2hvcnMgPSB7fTtcclxuICAgICAgICB0aGlzLm92ZXJsYXkkID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RyYXRpb24kID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5maW5pc2gkID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5zaG93aW5nU3RlcCQgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBoaW50IHNlcnZpY2VcclxuICAgICAqIEBtZXRob2QgaW5pdGlhbGl6ZVxyXG4gICAgICogQHBhcmFtICB7SGludE9wdGlvbnN9IG9wdGlvbnMgaW5pdCBvcHRpb25zXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHN0YXJ0T3JkZXIgc3RhcnQgb3JkZXJcclxuICAgICAqIEByZXR1cm4gdm9pZFxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChvcHRpb25zLCBzdGFydE9yZGVyKSB7XHJcbiAgICAgICAgdGhpcy5oaW50T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24obmV3IG9wdGlvbnNfMS5IaW50T3B0aW9ucygpLCBvcHRpb25zIHx8IG5ldyBvcHRpb25zXzEuSGludE9wdGlvbnMoKSk7XHJcbiAgICAgICAgdmFyIG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy5oaW50T3B0aW9ucy5zdGVwVGFnKTtcclxuICAgICAgICB0aGlzLnN0ZXBzID0gdGhpcy5pbml0U3RlcHMobm9kZXMpO1xyXG4gICAgICAgIHZhciBzdGFydFN0ZXBJbmRleDtcclxuICAgICAgICAvLyBGaW5kIHNhbWUgb3JkZXIgb24gc3RhcnRPcmRlciBhbmQgU3RlcHNcclxuICAgICAgICB0aGlzLnN0ZXBzLnNvbWUoZnVuY3Rpb24gKHN0ZXAsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChzdGVwLm9yZGVyID09PSBzdGFydE9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFN0ZXBJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoc3RhcnRTdGVwSW5kZXggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdGFydFN0ZXBJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhcnRBdChzdGFydFN0ZXBJbmRleCk7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5JC5uZXh0KHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwXHJcbiAgICAgKiBAbWV0aG9kIHNob3dcclxuICAgICAqIEBwYXJhbSAge1N0ZXB9IHN0ZXAgW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChzdGVwKSB7XHJcbiAgICAgICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yc1tzdGVwLnNlbGVjdG9yXTtcclxuICAgICAgICBpZiAoIWFuY2hvcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuY2hvci5zaG93U3RlcCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwIG5leHQgdG8ge1N0ZXB9IHRoaXMuY3VycmVudFN0ZXBcclxuICAgICAqIEBtZXRob2Qgc2hvd05leHRcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSB0aGlzLnN0ZXBzW3RoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSArIDFdO1xyXG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl07XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbmNob3Iuc2hvd1N0ZXAoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE9uIG92ZXJsYXkgY2xpY2sgYmVoYXZpb3VyXHJcbiAgICAgKiBAbWV0aG9kIG92ZXJsYXlOZXh0XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5vdmVybGF5TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdLmhpZGVTdGVwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05leHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwIHByZXZpb3VzIHRvIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwXHJcbiAgICAgKiBAbWV0aG9kIHNob3dQcmV2XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5zaG93UHJldiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1t0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgLSAxXTtcclxuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xyXG4gICAgICAgIGlmICghYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5jaG9yLnNob3dTdGVwKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlciBoaW50IGNvbXBvbmVudFxyXG4gICAgICogQG1ldGhvZCByZWdpc3RlclxyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgIHNlbGVjdG9yICBiaW5kZWQgdG9cclxuICAgICAqIEBwYXJhbSAge1RvdXJDb21wb25lbnR9IGNvbXBvbmVudCBpdHNlbGZcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5hbmNob3JzW3NlbGVjdG9yXSkge1xyXG4gICAgICAgICAgICB0aHJvdyAnc2VsZWN0b3IgJyArIHNlbGVjdG9yICsgJyBhbHJlYWR5IHJlZ2lzdGVyZWQhJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hbmNob3JzW3NlbGVjdG9yXSA9IGNvbXBvbmVudDtcclxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbiQubmV4dCh0cnVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIElzIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwIGhhcyBuZXh0XHJcbiAgICAgKiBAbWV0aG9kIGhhc05leHRcclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgPCB0aGlzLnN0ZXBzLmxlbmd0aCAtIDE7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJcyB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcCBoYXMgcHJldmlvdXNcclxuICAgICAqIEBtZXRob2QgaGFzUHJldlxyXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmhhc1ByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSA+IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5hbGl6ZSBvdXIgaGludCB0b3VyLlxyXG4gICAgICogQG1ldGhvZCBlbmRcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm92ZXJsYXkkLm5leHQoZmFsc2UpO1xyXG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl07XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGFuY2hvci5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoJC5uZXh0KHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgaGludCB0b3VyIGF0IHNvbWUgcG9zaXRpb25cclxuICAgICAqIEBtZXRob2Qgc3RhcnRBdFxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBzdGVwSWQgcG9zaXRpb24gaW4gdGhpcy5zdGVwc1xyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc3RhcnRBdCA9IGZ1bmN0aW9uIChzdGVwSWQpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1tzdGVwSWRdO1xyXG4gICAgICAgIHRoaXMuc2hvdyh0aGlzLmN1cnJlbnRTdGVwKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgRWxlbWVudFtdIHRvIFN0ZXBbXVxyXG4gICAgICogQG1ldGhvZCBpbml0U3RlcHNcclxuICAgICAqIEBwYXJhbSAge05vZGVMaXN0T2Y8RWxlbWVudD59IG5vZGVzXHJcbiAgICAgKiBAcmV0dXJuIHtTdGVwW119XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5pbml0U3RlcHMgPSBmdW5jdGlvbiAobm9kZXMpIHtcclxuICAgICAgICB2YXIgc3RlcHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN0ZXBzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IG5vZGVzW2ldLmdldEF0dHJpYnV0ZSgnc2VsZWN0b3InKSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiArbm9kZXNbaV0uZ2V0QXR0cmlidXRlKCdvcmRlcicpIHx8IHRoaXMuaGludE9wdGlvbnMuZGVmYXVsdE9yZGVyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0ZXBzID0gc3RlcHMuc29ydChmdW5jdGlvbiAoZWwxLCBlbDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsMS5vcmRlciAtIGVsMi5vcmRlcjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUucHV0T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpO1xyXG4gICAgfTtcclxuICAgIEhpbnRTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLkluamVjdGFibGUoKVxyXG4gICAgXSwgSGludFNlcnZpY2UpO1xyXG4gICAgcmV0dXJuIEhpbnRTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpbnRTZXJ2aWNlID0gSGludFNlcnZpY2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpbnQuc2VydmljZS5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcclxuZXhwb3J0cy5IaW50Q29uZmlnID0ge1xyXG4gICAgSElOVF9UQUc6ICd0b3VyLXN0ZXAnLFxyXG4gICAgREVGQVVMVF9QT1NJVElPTjogJ2JvdHRvbScsXHJcbiAgICBaX0lOREVYOiAnOTk5JyxcclxuICAgIERFRkFVTFRfT1JERVI6IDk5LFxyXG4gICAgREVGQVVMVF9QWF9MQVlFUjogMTUsXHJcbiAgICBBUFBMWV9SRUxBVElWRTogdHJ1ZSxcclxuICAgIERJU01JU1NfT05fT1ZFUkxBWTogZmFsc2UsXHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhcmlhYmxlcy5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGhpbnRfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuZXhwb3J0cy5IaW50U2VydmljZSA9IGhpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlO1xyXG52YXIgY29tbW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG52YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxudmFyIGhpbnRfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xyXG52YXIgdG91cl9jb21wb25lbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcbmV4cG9ydHMuVG91ckNvbXBvbmVudCA9IHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudDtcclxudmFyIEhpbnRNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIaW50TW9kdWxlKCkge1xyXG4gICAgfVxyXG4gICAgSGludE1vZHVsZV8xID0gSGludE1vZHVsZTtcclxuICAgIEhpbnRNb2R1bGUuZm9yUm9vdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZ01vZHVsZTogSGludE1vZHVsZV8xLFxyXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICAgICAgICAgIGhpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSGludE1vZHVsZSA9IEhpbnRNb2R1bGVfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5OZ01vZHVsZSh7XHJcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW2hpbnRfY29tcG9uZW50XzEuSGludENvbXBvbmVudCwgdG91cl9jb21wb25lbnRfMS5Ub3VyQ29tcG9uZW50XSxcclxuICAgICAgICAgICAgZXhwb3J0czogW2hpbnRfY29tcG9uZW50XzEuSGludENvbXBvbmVudCwgdG91cl9jb21wb25lbnRfMS5Ub3VyQ29tcG9uZW50XSxcclxuICAgICAgICAgICAgaW1wb3J0czogW2NvbW1vbl8xLkNvbW1vbk1vZHVsZV0sXHJcbiAgICAgICAgfSlcclxuICAgIF0sIEhpbnRNb2R1bGUpO1xyXG4gICAgcmV0dXJuIEhpbnRNb2R1bGU7XHJcbiAgICB2YXIgSGludE1vZHVsZV8xO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpbnRNb2R1bGUgPSBIaW50TW9kdWxlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oMykpO1xyXG5cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBoaW50X3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcbnZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xyXG52YXIgSGludENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhpbnRDb21wb25lbnQoaGludFNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UgPSBoaW50U2VydmljZTtcclxuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlLm92ZXJsYXkkLnN1YnNjcmliZShmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMuc2hvdyA9IGRhdGE7IH0pO1xyXG4gICAgfVxyXG4gICAgSGludENvbXBvbmVudC5wcm90b3R5cGUuZGlzbWlzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kaXNtaXNzT25PdmVybGF5KVxyXG4gICAgICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlLm92ZXJsYXlOZXh0KCk7XHJcbiAgICB9O1xyXG4gICAgSGludENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICd0b3VyLW92ZXJsYXknLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJoaW50LW92ZXJsYXlcXFwiICpuZ0lmPVxcXCJzaG93XFxcIiAoY2xpY2spPVxcXCJkaXNtaXNzKClcXFwiPjwvZGl2PlwiLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2VdKVxyXG4gICAgXSwgSGludENvbXBvbmVudCk7XHJcbiAgICByZXR1cm4gSGludENvbXBvbmVudDtcclxufSgpKTtcclxuZXhwb3J0cy5IaW50Q29tcG9uZW50ID0gSGludENvbXBvbmVudDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGludC5jb21wb25lbnQuanMubWFwXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxudmFyIGhpbnRfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxudmFyIHZhcmlhYmxlc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxudmFyIFRvdXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUb3VyQ29tcG9uZW50KGhpbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZSA9IGhpbnRTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMubmV4dEV2ZW50RW1pdHRlciA9IG5ldyBjb3JlXzEuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5wcmV2RXZlbnRFbWl0dGVyID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLmV4aXRFdmVudEVtaXR0ZXIgPSBuZXcgY29yZV8xLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgfVxyXG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5yZWdpc3Rlcih0aGlzLnNlbGVjdG9yLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5zaG93U3RlcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlLnNob3dpbmdTdGVwJC5uZXh0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uIHx8IHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMub3JkZXIgPSArdGhpcy5vcmRlciB8fCB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRPcmRlcjtcclxuICAgICAgICB2YXIgaGlnaGxpZ2h0ZWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWxlY3Rvcik7XHJcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuc3R5bGUuekluZGV4ID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5aX0lOREVYO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5lbGVtZW50c0Rpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVDbGljayhoaWdobGlnaHRlZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmFwcGx5UmVsYXRpdmUpIHtcclxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaW50LXJlbGF0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQ2xhc3MgPSAndHJhbnNmb3JtWF81MCB0cmFuc2Zvcm1ZXzEwMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wIC0gdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVhfNTAnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgKyB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0TGVmdCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRXaWR0aCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRUb3AgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0TGVmdCAtIHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdExheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQ2xhc3MgPSAndHJhbnNmb3JtWV81MCB0cmFuc2Zvcm1YXzEwMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggKyB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVlfNTAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbmV1dHJhbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggKyB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gdGhpcy5jdXN0b21Dc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdJbnZhbGlkIGhpbnQgcG9zaXRpb24gLT4nICsgdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b3BQb3MgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRQb3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dtZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5oYXNOZXh0ID0gdGhpcy5oaW50U2VydmljZS5oYXNOZXh0KCk7XHJcbiAgICAgICAgdGhpcy5oYXNQcmV2ID0gdGhpcy5oaW50U2VydmljZS5oYXNQcmV2KCk7XHJcbiAgICB9O1xyXG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuaGlkZVN0ZXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmIChoaWdobGlnaHRlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LnN0eWxlLnpJbmRleCA9ICcwJztcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVDbGljayhoaWdobGlnaHRlZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGludC1yZWxhdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dtZSA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmV4aXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5leGl0RXZlbnRFbWl0dGVyLmVtaXQoKTtcclxuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlLmVuZCgpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5uZXh0RXZlbnRFbWl0dGVyLmVtaXQoKTtcclxuICAgICAgICB0aGlzLmhpZGVTdGVwKCk7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93TmV4dCgpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2RXZlbnRFbWl0dGVyLmVtaXQoKTtcclxuICAgICAgICB0aGlzLmhpZGVTdGVwKCk7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93UHJldigpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmRpc2FibGVDbGljayA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaW50LWRpc2FibGVkJyk7XHJcbiAgICB9O1xyXG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuZW5hYmxlQ2xpY2sgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGludC1kaXNhYmxlZCcpO1xyXG4gICAgfTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLklucHV0KCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdG9yXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuSW5wdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwib3JkZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLklucHV0KCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcImN1c3RvbUNzc1wiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLk91dHB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBjb3JlXzEuRXZlbnRFbWl0dGVyKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwibmV4dEV2ZW50RW1pdHRlclwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLk91dHB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBjb3JlXzEuRXZlbnRFbWl0dGVyKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwicHJldkV2ZW50RW1pdHRlclwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLk91dHB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBjb3JlXzEuRXZlbnRFbWl0dGVyKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZXhpdEV2ZW50RW1pdHRlclwiLCB2b2lkIDApO1xyXG4gICAgVG91ckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG4gICAgICAgICAgICBzZWxlY3RvcjogdmFyaWFibGVzXzEuSGludENvbmZpZy5ISU5UX1RBRyxcclxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiaW50cm8tdG91ci1oaW50LXdyYXBwZXIge3t0cmFuc2Zvcm1DbGFzc319IHN0ZXB7e29yZGVyfX0ge3twb3NpdGlvbn19XFxcIlxcbiAgKm5nSWY9XFxcInNob3dtZVxcXCIgW25nU3R5bGVdPVxcXCJ7J3RvcCc6IHRvcFBvcysncHgnLCAnbGVmdCc6IGxlZnRQb3MrJ3B4J31cXFwiID5cXG4gICAgPGRpdiBjbGFzcz1cXFwiaGVhZGVyXFxcIiAqbmdJZj1cXFwidGl0bGVcXFwiPnt7dGl0bGV9fTwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50XFxcIj48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImZvb3RlclxcXCI+XFxuICAgICAgPGEgY2xhc3M9XFxcIm5hdmlnYXRlLWJ0biBwcmV2XFxcIiAqbmdJZj1cXFwiaGFzUHJldlxcXCIgKGNsaWNrKT1cXFwicHJldigpXFxcIj4mIzg1OTI7PC9hPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJuYXZpZ2F0ZS1idG4gbmV4dFxcXCIgKm5nSWY9XFxcImhhc05leHRcXFwiIChjbGljayk9XFxcIm5leHQoKVxcXCI+JiM4NTk0OzwvYT5cXG4gICAgICA8YSBjbGFzcz1cXFwibmF2aWdhdGUtYnRuIGV4aXRcXFwiIChjbGljayk9XFxcImV4aXQoKVxcXCI+JiMxMDAwNjs8L2E+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XCIsXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtoaW50X3NlcnZpY2VfMS5IaW50U2VydmljZV0pXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50KTtcclxuICAgIHJldHVybiBUb3VyQ29tcG9uZW50O1xyXG59KCkpO1xyXG5leHBvcnRzLlRvdXJDb21wb25lbnQgPSBUb3VyQ29tcG9uZW50O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD10b3VyLmNvbXBvbmVudC5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHZhcmlhYmxlc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxudmFyIEhpbnRPcHRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGludE9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50c0Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRQb3NpdGlvbiA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuREVGQVVMVF9QT1NJVElPTjtcclxuICAgICAgICB0aGlzLmRlZmF1bHRPcmRlciA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuREVGQVVMVF9PUkRFUjtcclxuICAgICAgICB0aGlzLmRlZmF1bHRMYXllciA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuREVGQVVMVF9QWF9MQVlFUjtcclxuICAgICAgICB0aGlzLmFwcGx5UmVsYXRpdmUgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkFQUExZX1JFTEFUSVZFO1xyXG4gICAgICAgIHRoaXMuc3RlcFRhZyA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuSElOVF9UQUc7XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzT25PdmVybGF5ID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5ESVNNSVNTX09OX09WRVJMQVk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSGludE9wdGlvbnM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSGludE9wdGlvbnMgPSBIaW50T3B0aW9ucztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3B0aW9ucy5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X187XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYW5ndWxhci1jdXN0b20tdG91ci51bWQubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNGYyNzEyMDg3ZDI5MjFkYjI5NjkiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvY29yZVwiXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcclxudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIik7XHJcbnZhciBvcHRpb25zXzEgPSByZXF1aXJlKFwiLi9vcHRpb25zXCIpO1xyXG52YXIgSGludFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIaW50U2VydmljZSgpIHtcclxuICAgICAgICB0aGlzLmFuY2hvcnMgPSB7fTtcclxuICAgICAgICB0aGlzLm92ZXJsYXkkID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RyYXRpb24kID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5maW5pc2gkID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5zaG93aW5nU3RlcCQgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBoaW50IHNlcnZpY2VcclxuICAgICAqIEBtZXRob2QgaW5pdGlhbGl6ZVxyXG4gICAgICogQHBhcmFtICB7SGludE9wdGlvbnN9IG9wdGlvbnMgaW5pdCBvcHRpb25zXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHN0YXJ0T3JkZXIgc3RhcnQgb3JkZXJcclxuICAgICAqIEByZXR1cm4gdm9pZFxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChvcHRpb25zLCBzdGFydE9yZGVyKSB7XHJcbiAgICAgICAgdGhpcy5oaW50T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24obmV3IG9wdGlvbnNfMS5IaW50T3B0aW9ucygpLCBvcHRpb25zIHx8IG5ldyBvcHRpb25zXzEuSGludE9wdGlvbnMoKSk7XHJcbiAgICAgICAgdmFyIG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy5oaW50T3B0aW9ucy5zdGVwVGFnKTtcclxuICAgICAgICB0aGlzLnN0ZXBzID0gdGhpcy5pbml0U3RlcHMobm9kZXMpO1xyXG4gICAgICAgIHZhciBzdGFydFN0ZXBJbmRleDtcclxuICAgICAgICAvLyBGaW5kIHNhbWUgb3JkZXIgb24gc3RhcnRPcmRlciBhbmQgU3RlcHNcclxuICAgICAgICB0aGlzLnN0ZXBzLnNvbWUoZnVuY3Rpb24gKHN0ZXAsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChzdGVwLm9yZGVyID09PSBzdGFydE9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFN0ZXBJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoc3RhcnRTdGVwSW5kZXggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdGFydFN0ZXBJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhcnRBdChzdGFydFN0ZXBJbmRleCk7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5JC5uZXh0KHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwXHJcbiAgICAgKiBAbWV0aG9kIHNob3dcclxuICAgICAqIEBwYXJhbSAge1N0ZXB9IHN0ZXAgW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChzdGVwKSB7XHJcbiAgICAgICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yc1tzdGVwLnNlbGVjdG9yXTtcclxuICAgICAgICBpZiAoIWFuY2hvcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuY2hvci5zaG93U3RlcCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwIG5leHQgdG8ge1N0ZXB9IHRoaXMuY3VycmVudFN0ZXBcclxuICAgICAqIEBtZXRob2Qgc2hvd05leHRcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSB0aGlzLnN0ZXBzW3RoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSArIDFdO1xyXG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl07XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbmNob3Iuc2hvd1N0ZXAoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE9uIG92ZXJsYXkgY2xpY2sgYmVoYXZpb3VyXHJcbiAgICAgKiBAbWV0aG9kIG92ZXJsYXlOZXh0XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5vdmVybGF5TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdLmhpZGVTdGVwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05leHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwIHByZXZpb3VzIHRvIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwXHJcbiAgICAgKiBAbWV0aG9kIHNob3dQcmV2XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5zaG93UHJldiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1t0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgLSAxXTtcclxuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xyXG4gICAgICAgIGlmICghYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5jaG9yLnNob3dTdGVwKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlciBoaW50IGNvbXBvbmVudFxyXG4gICAgICogQG1ldGhvZCByZWdpc3RlclxyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgIHNlbGVjdG9yICBiaW5kZWQgdG9cclxuICAgICAqIEBwYXJhbSAge1RvdXJDb21wb25lbnR9IGNvbXBvbmVudCBpdHNlbGZcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5hbmNob3JzW3NlbGVjdG9yXSkge1xyXG4gICAgICAgICAgICB0aHJvdyAnc2VsZWN0b3IgJyArIHNlbGVjdG9yICsgJyBhbHJlYWR5IHJlZ2lzdGVyZWQhJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hbmNob3JzW3NlbGVjdG9yXSA9IGNvbXBvbmVudDtcclxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbiQubmV4dCh0cnVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIElzIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwIGhhcyBuZXh0XHJcbiAgICAgKiBAbWV0aG9kIGhhc05leHRcclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgPCB0aGlzLnN0ZXBzLmxlbmd0aCAtIDE7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJcyB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcCBoYXMgcHJldmlvdXNcclxuICAgICAqIEBtZXRob2QgaGFzUHJldlxyXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmhhc1ByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSA+IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5hbGl6ZSBvdXIgaGludCB0b3VyLlxyXG4gICAgICogQG1ldGhvZCBlbmRcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm92ZXJsYXkkLm5leHQoZmFsc2UpO1xyXG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl07XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGFuY2hvci5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoJC5uZXh0KHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgaGludCB0b3VyIGF0IHNvbWUgcG9zaXRpb25cclxuICAgICAqIEBtZXRob2Qgc3RhcnRBdFxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBzdGVwSWQgcG9zaXRpb24gaW4gdGhpcy5zdGVwc1xyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc3RhcnRBdCA9IGZ1bmN0aW9uIChzdGVwSWQpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1tzdGVwSWRdO1xyXG4gICAgICAgIHRoaXMuc2hvdyh0aGlzLmN1cnJlbnRTdGVwKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgRWxlbWVudFtdIHRvIFN0ZXBbXVxyXG4gICAgICogQG1ldGhvZCBpbml0U3RlcHNcclxuICAgICAqIEBwYXJhbSAge05vZGVMaXN0T2Y8RWxlbWVudD59IG5vZGVzXHJcbiAgICAgKiBAcmV0dXJuIHtTdGVwW119XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5pbml0U3RlcHMgPSBmdW5jdGlvbiAobm9kZXMpIHtcclxuICAgICAgICB2YXIgc3RlcHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN0ZXBzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IG5vZGVzW2ldLmdldEF0dHJpYnV0ZSgnc2VsZWN0b3InKSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiArbm9kZXNbaV0uZ2V0QXR0cmlidXRlKCdvcmRlcicpIHx8IHRoaXMuaGludE9wdGlvbnMuZGVmYXVsdE9yZGVyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0ZXBzID0gc3RlcHMuc29ydChmdW5jdGlvbiAoZWwxLCBlbDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsMS5vcmRlciAtIGVsMi5vcmRlcjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUucHV0T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpO1xyXG4gICAgfTtcclxuICAgIEhpbnRTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLkluamVjdGFibGUoKVxyXG4gICAgXSwgSGludFNlcnZpY2UpO1xyXG4gICAgcmV0dXJuIEhpbnRTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpbnRTZXJ2aWNlID0gSGludFNlcnZpY2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpbnQuc2VydmljZS5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oaW50LnNlcnZpY2UuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcclxuZXhwb3J0cy5IaW50Q29uZmlnID0ge1xyXG4gICAgSElOVF9UQUc6ICd0b3VyLXN0ZXAnLFxyXG4gICAgREVGQVVMVF9QT1NJVElPTjogJ2JvdHRvbScsXHJcbiAgICBaX0lOREVYOiAnOTk5JyxcclxuICAgIERFRkFVTFRfT1JERVI6IDk5LFxyXG4gICAgREVGQVVMVF9QWF9MQVlFUjogMTUsXHJcbiAgICBBUFBMWV9SRUxBVElWRTogdHJ1ZSxcclxuICAgIERJU01JU1NfT05fT1ZFUkxBWTogZmFsc2UsXHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhcmlhYmxlcy5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy92YXJpYWJsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGhpbnRfc2VydmljZV8xID0gcmVxdWlyZShcIi4vaGludC5zZXJ2aWNlXCIpO1xyXG5leHBvcnRzLkhpbnRTZXJ2aWNlID0gaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2U7XHJcbnZhciBjb21tb25fMSA9IHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIik7XHJcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcclxudmFyIGhpbnRfY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9oaW50LmNvbXBvbmVudFwiKTtcclxudmFyIHRvdXJfY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9pbnRyby10b3VyL3RvdXIuY29tcG9uZW50XCIpO1xyXG5leHBvcnRzLlRvdXJDb21wb25lbnQgPSB0b3VyX2NvbXBvbmVudF8xLlRvdXJDb21wb25lbnQ7XHJcbnZhciBIaW50TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGludE1vZHVsZSgpIHtcclxuICAgIH1cclxuICAgIEhpbnRNb2R1bGVfMSA9IEhpbnRNb2R1bGU7XHJcbiAgICBIaW50TW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmdNb2R1bGU6IEhpbnRNb2R1bGVfMSxcclxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgICAgICAgICBoaW50X3NlcnZpY2VfMS5IaW50U2VydmljZSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEhpbnRNb2R1bGUgPSBIaW50TW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuTmdNb2R1bGUoe1xyXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtoaW50X2NvbXBvbmVudF8xLkhpbnRDb21wb25lbnQsIHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudF0sXHJcbiAgICAgICAgICAgIGV4cG9ydHM6IFtoaW50X2NvbXBvbmVudF8xLkhpbnRDb21wb25lbnQsIHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudF0sXHJcbiAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb25fMS5Db21tb25Nb2R1bGVdLFxyXG4gICAgICAgIH0pXHJcbiAgICBdLCBIaW50TW9kdWxlKTtcclxuICAgIHJldHVybiBIaW50TW9kdWxlO1xyXG4gICAgdmFyIEhpbnRNb2R1bGVfMTtcclxufSgpKTtcclxuZXhwb3J0cy5IaW50TW9kdWxlID0gSGludE1vZHVsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0ICogZnJvbSAnLi9zcmMnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9hbmd1bGFyMi10ZW1wbGF0ZS1sb2FkZXIhLi9pbmRleC50cyIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgaGludF9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9oaW50LnNlcnZpY2VcIik7XHJcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcclxudmFyIEhpbnRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIaW50Q29tcG9uZW50KGhpbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlID0gaGludFNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5JC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF90aGlzLnNob3cgPSBkYXRhOyB9KTtcclxuICAgIH1cclxuICAgIEhpbnRDb21wb25lbnQucHJvdG90eXBlLmRpc21pc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGlzbWlzc09uT3ZlcmxheSlcclxuICAgICAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5TmV4dCgpO1xyXG4gICAgfTtcclxuICAgIEhpbnRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXHJcbiAgICAgICAgICAgIHNlbGVjdG9yOiAndG91ci1vdmVybGF5JyxcclxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiaGludC1vdmVybGF5XFxcIiAqbmdJZj1cXFwic2hvd1xcXCIgKGNsaWNrKT1cXFwiZGlzbWlzcygpXFxcIj48L2Rpdj5cIixcclxuICAgICAgICB9KSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW2hpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlXSlcclxuICAgIF0sIEhpbnRDb21wb25lbnQpO1xyXG4gICAgcmV0dXJuIEhpbnRDb21wb25lbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSGludENvbXBvbmVudCA9IEhpbnRDb21wb25lbnQ7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpbnQuY29tcG9uZW50LmpzLm1hcFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2hpbnQuY29tcG9uZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29yZV8xID0gcmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIik7XHJcbnZhciBoaW50X3NlcnZpY2VfMSA9IHJlcXVpcmUoXCIuLi9oaW50LnNlcnZpY2VcIik7XHJcbnZhciB2YXJpYWJsZXNfMSA9IHJlcXVpcmUoXCIuLi92YXJpYWJsZXNcIik7XHJcbnZhciBUb3VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVG91ckNvbXBvbmVudChoaW50U2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UgPSBoaW50U2VydmljZTtcclxuICAgICAgICB0aGlzLm5leHRFdmVudEVtaXR0ZXIgPSBuZXcgY29yZV8xLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMucHJldkV2ZW50RW1pdHRlciA9IG5ldyBjb3JlXzEuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5leGl0RXZlbnRFbWl0dGVyID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UucmVnaXN0ZXIodGhpcy5zZWxlY3RvciwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuc2hvd1N0ZXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93aW5nU3RlcCQubmV4dCh0aGlzKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiB8fCB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLm9yZGVyID0gK3RoaXMub3JkZXIgfHwgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0T3JkZXI7XHJcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmIChoaWdobGlnaHRlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LnN0eWxlLnpJbmRleCA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuWl9JTkRFWDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZWxlbWVudHNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5hcHBseVJlbGF0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGludC1yZWxhdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVhfNTAgdHJhbnNmb3JtWV8xMDAnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCAtIHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdExheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1YXzUwJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRUb3AgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgLSB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVlfNTAgdHJhbnNmb3JtWF8xMDAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1ZXzUwJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ25ldXRyYWwnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9IHRoaXMuY3VzdG9tQ3NzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnSW52YWxpZCBoaW50IHBvc2l0aW9uIC0+JyArIHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9wUG9zID0gMDtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93bWUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaGFzTmV4dCA9IHRoaXMuaGludFNlcnZpY2UuaGFzTmV4dCgpO1xyXG4gICAgICAgIHRoaXMuaGFzUHJldiA9IHRoaXMuaGludFNlcnZpY2UuaGFzUHJldigpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmhpZGVTdGVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBoaWdobGlnaHRlZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMCc7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpbnQtcmVsYXRpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93bWUgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5leGl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZXhpdEV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5lbmQoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubmV4dEV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2Uuc2hvd05leHQoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucHJldkV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2Uuc2hvd1ByZXYoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5kaXNhYmxlQ2xpY2sgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGludC1kaXNhYmxlZCcpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmVuYWJsZUNsaWNrID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpbnQtZGlzYWJsZWQnKTtcclxuICAgIH07XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuSW5wdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RvclwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLklucHV0KCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9yZGVyXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuSW5wdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjdXN0b21Dc3NcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcIm5leHRFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcInByZXZFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcImV4aXRFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIFRvdXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6IHZhcmlhYmxlc18xLkhpbnRDb25maWcuSElOVF9UQUcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9XFxcImludHJvLXRvdXItaGludC13cmFwcGVyIHt7dHJhbnNmb3JtQ2xhc3N9fSBzdGVwe3tvcmRlcn19IHt7cG9zaXRpb259fVxcXCJcXG4gICpuZ0lmPVxcXCJzaG93bWVcXFwiIFtuZ1N0eWxlXT1cXFwieyd0b3AnOiB0b3BQb3MrJ3B4JywgJ2xlZnQnOiBsZWZ0UG9zKydweCd9XFxcIiA+XFxuICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlclxcXCIgKm5nSWY9XFxcInRpdGxlXFxcIj57e3RpdGxlfX08L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJmb290ZXJcXFwiPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJuYXZpZ2F0ZS1idG4gcHJldlxcXCIgKm5nSWY9XFxcImhhc1ByZXZcXFwiIChjbGljayk9XFxcInByZXYoKVxcXCI+JiM4NTkyOzwvYT5cXG4gICAgICA8YSBjbGFzcz1cXFwibmF2aWdhdGUtYnRuIG5leHRcXFwiICpuZ0lmPVxcXCJoYXNOZXh0XFxcIiAoY2xpY2spPVxcXCJuZXh0KClcXFwiPiYjODU5NDs8L2E+XFxuICAgICAgPGEgY2xhc3M9XFxcIm5hdmlnYXRlLWJ0biBleGl0XFxcIiAoY2xpY2spPVxcXCJleGl0KClcXFwiPiYjMTAwMDY7PC9hPlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlwiLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2VdKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudCk7XHJcbiAgICByZXR1cm4gVG91ckNvbXBvbmVudDtcclxufSgpKTtcclxuZXhwb3J0cy5Ub3VyQ29tcG9uZW50ID0gVG91ckNvbXBvbmVudDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG91ci5jb21wb25lbnQuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW50cm8tdG91ci90b3VyLmNvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdmFyaWFibGVzXzEgPSByZXF1aXJlKFwiLi92YXJpYWJsZXNcIik7XHJcbnZhciBIaW50T3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhpbnRPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHNEaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0UG9zaXRpb24gPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUE9TSVRJT047XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0T3JkZXIgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfT1JERVI7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGF5ZXIgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUFhfTEFZRVI7XHJcbiAgICAgICAgdGhpcy5hcHBseVJlbGF0aXZlID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5BUFBMWV9SRUxBVElWRTtcclxuICAgICAgICB0aGlzLnN0ZXBUYWcgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkhJTlRfVEFHO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzc09uT3ZlcmxheSA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuRElTTUlTU19PTl9PVkVSTEFZO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEhpbnRPcHRpb25zO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpbnRPcHRpb25zID0gSGludE9wdGlvbnM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbnMuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvb3B0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvY29tbW9uXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInJ4anMvU3ViamVjdFwiXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=