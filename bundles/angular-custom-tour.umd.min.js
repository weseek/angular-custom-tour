!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("@angular/common"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common","rxjs/Subject"],e):"object"==typeof exports?exports["angular-custom-tour"]=e(require("@angular/core"),require("@angular/common"),require("rxjs/Subject")):t["angular-custom-tour"]=e(t["@angular/core"],t["@angular/common"],t["rxjs/Subject"])}(this,function(t,e,i){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=4)}([function(e,i){e.exports=t},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),r=i(9),s=i(7),c=function(){function t(){this.anchors={},this.overlay$=new r.Subject,this.registration$=new r.Subject,this.finish$=new r.Subject,this.showingStep$=new r.Subject}return t.prototype.initialize=function(t){void 0===t&&(t=new s.HintOptions),this.hintOptions=Object.assign(new s.HintOptions,t);var e=document.getElementsByTagName(this.hintOptions.stepTag);this.steps=this.initSteps(e),this.startAt(0),this.overlay$.next(!0)},t.prototype.show=function(t){var e=this.anchors[t.selector];e&&e.showStep()},t.prototype.showNext=function(){this.currentStep=this.steps[this.steps.indexOf(this.currentStep)+1];var t=this.anchors[this.currentStep.selector];t&&t.showStep()},t.prototype.overlayNext=function(){this.hasNext()?(this.anchors[this.currentStep.selector].hideStep(),this.showNext()):this.end()},t.prototype.showPrev=function(){this.currentStep=this.steps[this.steps.indexOf(this.currentStep)-1];var t=this.anchors[this.currentStep.selector];t&&t.showStep()},t.prototype.register=function(t,e){if(this.anchors[t])throw"selector "+t+" already registered!";this.anchors[t]=e,this.registration$.next(!0)},t.prototype.hasNext=function(){return this.steps.indexOf(this.currentStep)<this.steps.length-1},t.prototype.hasPrev=function(){return this.steps.indexOf(this.currentStep)>0},t.prototype.end=function(){this.overlay$.next(!1);var t=this.anchors[this.currentStep.selector];t&&(this.currentStep=void 0,t.hideStep(),this.finish$.next(!0))},t.prototype.startAt=function(t){this.currentStep=this.steps[t],this.show(this.currentStep)},t.prototype.initSteps=function(t){for(var e=[],i=0;i<t.length;i++)e.push({selector:t[i].getAttribute("selector"),order:+t[i].getAttribute("order")||this.hintOptions.defaultOrder});return e=e.sort(function(t,e){return t.order-e.order})},t.prototype.putOverlay=function(){document.getElementsByTagName("body")},t=n([o.Injectable()],t)}();e.HintService=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HintConfig={HINT_TAG:"tour-step",DEFAULT_POSITION:"bottom",Z_INDEX:"999",DEFAULT_ORDER:99,DEFAULT_PX_LAYER:15,APPLY_RELATIVE:!0,DISMISS_ON_OVERLAY:!1}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.HintService=o.HintService;var r=i(8),s=i(0),c=i(5),a=i(6);e.TourComponent=a.TourComponent;var h=function(){function t(){}return e=t,t.forRoot=function(){return{ngModule:e,providers:[o.HintService]}},t=e=n([s.NgModule({declarations:[c.HintComponent,a.TourComponent],exports:[c.HintComponent,a.TourComponent],imports:[r.CommonModule]})],t);var e}();e.HintModule=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(3))},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=i(0),c=function(){function t(t){var e=this;this.hintService=t,this.hintService.overlay$.subscribe(function(t){return e.show=t})}return t.prototype.dismiss=function(){this.hintService.hintOptions.dismissOnOverlay&&this.hintService.overlayNext()},t=n([s.Component({selector:"tour-overlay",template:'<div class="hint-overlay" *ngIf="show" (click)="dismiss()"></div>'}),o("design:paramtypes",[r.HintService])],t)}();e.HintComponent=c},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(1),c=i(2),a=function(){function t(t){this.hintService=t}return t.prototype.ngOnInit=function(){this.hintService.register(this.selector,this)},t.prototype.showStep=function(){this.hintService.showingStep$.next(this),this.position=this.position||this.hintService.hintOptions.defaultPosition,this.order=+this.order||this.hintService.hintOptions.defaultOrder;var t=document.getElementById(this.selector);if(t)switch(t.style.zIndex=c.HintConfig.Z_INDEX,this.hintService.hintOptions.elementsDisabled&&this.disableClick(t),this.hintService.hintOptions.applyRelative&&t.classList.add("hint-relative"),this.position){case"top":this.transformClass="transformX_50 transformY_100",this.topPos=t.offsetTop-this.hintService.hintOptions.defaultLayer,this.leftPos=t.offsetLeft+t.offsetWidth/2;break;case"bottom":this.transformClass="transformX_50",this.topPos=t.offsetTop+t.offsetHeight+this.hintService.hintOptions.defaultLayer,this.leftPos=t.offsetLeft+t.offsetWidth/2;break;case"left":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft-this.hintService.hintOptions.defaultLayer,this.transformClass="transformY_50 transformX_100";break;case"right":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft+t.offsetWidth+this.hintService.hintOptions.defaultLayer,this.transformClass="transformY_50";break;case"neutral":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft+t.offsetWidth+this.hintService.hintOptions.defaultLayer,this.transformClass=this.customCss;break;default:throw"Invalid hint position ->"+this.position}else this.topPos=0,this.leftPos=0;this.showme=!0,this.hasNext=this.hintService.hasNext(),this.hasPrev=this.hintService.hasPrev()},t.prototype.hideStep=function(){var t=document.getElementById(this.selector);t&&(t.style.zIndex="0",this.enableClick(t),t.classList.remove("hint-relative")),this.showme=!1},t.prototype.exit=function(){this.hintService.end()},t.prototype.next=function(){this.hideStep(),this.hintService.showNext()},t.prototype.prev=function(){this.hideStep(),this.hintService.showPrev()},t.prototype.disableClick=function(t){t.classList.add("hint-disabled")},t.prototype.enableClick=function(t){t.classList.remove("hint-disabled")},n([r.Input(),o("design:type",String)],t.prototype,"title",void 0),n([r.Input(),o("design:type",String)],t.prototype,"selector",void 0),n([r.Input(),o("design:type",Number)],t.prototype,"order",void 0),n([r.Input(),o("design:type",String)],t.prototype,"position",void 0),n([r.Input(),o("design:type",String)],t.prototype,"customCss",void 0),t=n([r.Component({selector:c.HintConfig.HINT_TAG,template:'<div class="intro-tour-hint-wrapper {{transformClass}} step{{order}} {{position}}"\n  *ngIf="showme" [ngStyle]="{\'top\': topPos+\'px\', \'left\': leftPos+\'px\'}" >\n    <div class="header" *ngIf="title">{{title}}</div>\n    <div class="content"><ng-content></ng-content></div>\n    <div class="footer">\n      <a class="navigate-btn prev" *ngIf="hasPrev" (click)="prev()">&#8592;</a>\n      <a class="navigate-btn next" *ngIf="hasNext" (click)="next()">&#8594;</a>\n      <a class="navigate-btn exit" (click)="exit()">&#10006;</a>\n    </div>\n  </div>'}),o("design:paramtypes",[s.HintService])],t)}();e.TourComponent=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(){function t(){this.elementsDisabled=!0,this.defaultPosition=n.HintConfig.DEFAULT_POSITION,this.defaultOrder=n.HintConfig.DEFAULT_ORDER,this.defaultLayer=n.HintConfig.DEFAULT_PX_LAYER,this.applyRelative=n.HintConfig.APPLY_RELATIVE,this.stepTag=n.HintConfig.HINT_TAG,this.dismissOnOverlay=n.HintConfig.DISMISS_ON_OVERLAY}return t}();e.HintOptions=o},function(t,i){t.exports=e},function(t,e){t.exports=i}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9hbmd1bGFyLWN1c3RvbS10b3VyLnVtZC5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDNlNzRjYmIyMmUzY2Y5MWZkZmM1Iiwid2VicGFjazovLy9leHRlcm5hbCBcIkBhbmd1bGFyL2NvcmVcIiIsIndlYnBhY2s6Ly8vLi9zcmMvaGludC5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy92YXJpYWJsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9oaW50LmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50cm8tdG91ci90b3VyLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvb3B0aW9ucy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYW5ndWxhci9jb21tb25cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyeGpzL1N1YmplY3RcIiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19kZWNvcmF0ZSIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImNvcmVfMSIsIlN1YmplY3RfMSIsIm9wdGlvbnNfMSIsIkhpbnRTZXJ2aWNlIiwiYW5jaG9ycyIsIm92ZXJsYXkkIiwiU3ViamVjdCIsInJlZ2lzdHJhdGlvbiQiLCJmaW5pc2gkIiwic2hvd2luZ1N0ZXAkIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJIaW50T3B0aW9ucyIsImhpbnRPcHRpb25zIiwiYXNzaWduIiwibm9kZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3RlcFRhZyIsInN0ZXBzIiwiaW5pdFN0ZXBzIiwic3RhcnRBdCIsIm5leHQiLCJzaG93Iiwic3RlcCIsImFuY2hvciIsInNlbGVjdG9yIiwic2hvd1N0ZXAiLCJzaG93TmV4dCIsImN1cnJlbnRTdGVwIiwiaW5kZXhPZiIsIm92ZXJsYXlOZXh0IiwiaGFzTmV4dCIsImhpZGVTdGVwIiwiZW5kIiwic2hvd1ByZXYiLCJyZWdpc3RlciIsImNvbXBvbmVudCIsImhhc1ByZXYiLCJ1bmRlZmluZWQiLCJzdGVwSWQiLCJwdXNoIiwiZ2V0QXR0cmlidXRlIiwib3JkZXIiLCJkZWZhdWx0T3JkZXIiLCJzb3J0IiwiZWwxIiwiZWwyIiwicHV0T3ZlcmxheSIsIkluamVjdGFibGUiLCJIaW50Q29uZmlnIiwiSElOVF9UQUciLCJERUZBVUxUX1BPU0lUSU9OIiwiWl9JTkRFWCIsIkRFRkFVTFRfT1JERVIiLCJERUZBVUxUX1BYX0xBWUVSIiwiQVBQTFlfUkVMQVRJVkUiLCJESVNNSVNTX09OX09WRVJMQVkiLCJoaW50X3NlcnZpY2VfMSIsImNvbW1vbl8xIiwiaGludF9jb21wb25lbnRfMSIsInRvdXJfY29tcG9uZW50XzEiLCJUb3VyQ29tcG9uZW50IiwiSGludE1vZHVsZSIsIkhpbnRNb2R1bGVfMSIsImZvclJvb3QiLCJuZ01vZHVsZSIsInByb3ZpZGVycyIsIk5nTW9kdWxlIiwiZGVjbGFyYXRpb25zIiwiSGludENvbXBvbmVudCIsImltcG9ydHMiLCJDb21tb25Nb2R1bGUiLCJfX21ldGFkYXRhIiwiayIsInYiLCJtZXRhZGF0YSIsImhpbnRTZXJ2aWNlIiwiX3RoaXMiLCJzdWJzY3JpYmUiLCJkYXRhIiwiZGlzbWlzcyIsImRpc21pc3NPbk92ZXJsYXkiLCJDb21wb25lbnQiLCJ0ZW1wbGF0ZSIsInZhcmlhYmxlc18xIiwibmdPbkluaXQiLCJwb3NpdGlvbiIsImRlZmF1bHRQb3NpdGlvbiIsImhpZ2hsaWdodGVkRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJ6SW5kZXgiLCJlbGVtZW50c0Rpc2FibGVkIiwiZGlzYWJsZUNsaWNrIiwiYXBwbHlSZWxhdGl2ZSIsImNsYXNzTGlzdCIsImFkZCIsInRyYW5zZm9ybUNsYXNzIiwidG9wUG9zIiwib2Zmc2V0VG9wIiwiZGVmYXVsdExheWVyIiwibGVmdFBvcyIsIm9mZnNldExlZnQiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsImN1c3RvbUNzcyIsInNob3dtZSIsImVuYWJsZUNsaWNrIiwicmVtb3ZlIiwiZXhpdCIsInByZXYiLCJlbGVtZW50IiwiSW5wdXQiLCJTdHJpbmciLCJOdW1iZXIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsZ0JBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEsaUJBQUFBLFFBQUEsbUJBQUFBLFFBQUEsaUJBQ0Esa0JBQUFDLGdCQUFBQyxJQUNBRCxRQUFBLGtEQUFBSixHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLHVCQUFBRCxFQUFBRyxRQUFBLGlCQUFBQSxRQUFBLG1CQUFBQSxRQUFBLGlCQUVBSixFQUFBLHVCQUFBQyxFQUFBRCxFQUFBLGlCQUFBQSxFQUFB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QkFDQTZFLEVBQUF6RSxHQUNBVyxFQUFBbUYsV0FDQXpELFNBQUEyRCxFQUFBbkMsV0FBQUMsU0FDQWlDLFNBQUEsK2lCQUVBWCxFQUFBLHFCQUFBZixFQUFBdkQsZUFDQTJELEtBR0E3RyxHQUFBNkcsaUJSNFhNLFNBQVU1RyxFQUFRRCxFQUFTVSxHQUVqQyxZUzVmQWEsUUFBQUMsZUFBQXhCLEVBQUEsY0FBOENrQixPQUFBLEdBQzlDLElBQUFrSCxHQUFBMUgsRUFBQSxHQUNBaUQsRUFBQSxXQUNBLFFBQUFBLEtBQ0F0RCxLQUFBdUksa0JBQUEsRUFDQXZJLEtBQUFrSSxnQkFBQUgsRUFBQW5DLFdBQUFFLGlCQUNBOUYsS0FBQXNGLGFBQUF5QyxFQUFBbkMsV0FBQUksY0FDQWhHLEtBQUErSSxhQUFBaEIsRUFBQW5DLFdBQUFLLGlCQUNBakcsS0FBQXlJLGNBQUFWLEVBQUFuQyxXQUFBTSxlQUNBbEcsS0FBQTRELFFBQUFtRSxFQUFBbkMsV0FBQUMsU0FDQTdGLEtBQUE0SCxpQkFBQUcsRUFBQW5DLFdBQUFPLG1CQUVBLE1BQUE3QyxLQUVBM0QsR0FBQTJELGVUbWdCTSxTQUFVMUQsRUFBUUQsR1VsaEJ4QkMsRUFBQUQsUUFBQU8sR1Z3aEJNLFNBQVVOLEVBQVFELEdXeGhCeEJDLEVBQUFELFFBQUFRIiwiZmlsZSI6ImFuZ3VsYXItY3VzdG9tLXRvdXIudW1kLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIiksIHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIiksIHJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQGFuZ3VsYXIvY29yZVwiLCBcIkBhbmd1bGFyL2NvbW1vblwiLCBcInJ4anMvU3ViamVjdFwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJhbmd1bGFyLWN1c3RvbS10b3VyXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKSwgcmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiYW5ndWxhci1jdXN0b20tdG91clwiXSA9IGZhY3Rvcnkocm9vdFtcIkBhbmd1bGFyL2NvcmVcIl0sIHJvb3RbXCJAYW5ndWxhci9jb21tb25cIl0sIHJvb3RbXCJyeGpzL1N1YmplY3RcIl0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBhbmd1bGFyL2NvcmVcIiwgXCJAYW5ndWxhci9jb21tb25cIiwgXCJyeGpzL1N1YmplY3RcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1jdXN0b20tdG91clwiXSA9IGZhY3RvcnkocmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIiksIHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIiksIHJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImFuZ3VsYXItY3VzdG9tLXRvdXJcIl0gPSBmYWN0b3J5KHJvb3RbXCJAYW5ndWxhci9jb3JlXCJdLCByb290W1wiQGFuZ3VsYXIvY29tbW9uXCJdLCByb290W1wicnhqcy9TdWJqZWN0XCJdKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X18pIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX187XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcbnZhciBvcHRpb25zXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xudmFyIEhpbnRTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEhpbnRTZXJ2aWNlKCkge1xuICAgICAgICB0aGlzLmFuY2hvcnMgPSB7fTtcbiAgICAgICAgdGhpcy5vdmVybGF5JCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbiQgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5maW5pc2gkID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuc2hvd2luZ1N0ZXAkID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgaGludCBzZXJ2aWNlXG4gICAgICogQG1ldGhvZCBpbml0aWFsaXplXG4gICAgICogQHBhcmFtICB7SGludE9wdGlvbnN9IG9wdGlvbnMgaW5pdCBvcHRpb25zXG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSBuZXcgb3B0aW9uc18xLkhpbnRPcHRpb25zKCk7IH1cbiAgICAgICAgdGhpcy5oaW50T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24obmV3IG9wdGlvbnNfMS5IaW50T3B0aW9ucygpLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy5oaW50T3B0aW9ucy5zdGVwVGFnKTtcbiAgICAgICAgdGhpcy5zdGVwcyA9IHRoaXMuaW5pdFN0ZXBzKG5vZGVzKTtcbiAgICAgICAgdGhpcy5zdGFydEF0KDApO1xuICAgICAgICB0aGlzLm92ZXJsYXkkLm5leHQodHJ1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG93IHN0ZXBcbiAgICAgKiBAbWV0aG9kIHNob3dcbiAgICAgKiBAcGFyYW0gIHtTdGVwfSBzdGVwIFtkZXNjcmlwdGlvbl1cbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChzdGVwKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbc3RlcC5zZWxlY3Rvcl07XG4gICAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYW5jaG9yLnNob3dTdGVwKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG93IHN0ZXAgbmV4dCB0byB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcFxuICAgICAqIEBtZXRob2Qgc2hvd05leHRcbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc2hvd05leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSB0aGlzLnN0ZXBzW3RoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSArIDFdO1xuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xuICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFuY2hvci5zaG93U3RlcCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT24gb3ZlcmxheSBjbGljayBiZWhhdmlvdXJcbiAgICAgKiBAbWV0aG9kIG92ZXJsYXlOZXh0XG4gICAgICovXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLm92ZXJsYXlOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNOZXh0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yc1t0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yXS5oaWRlU3RlcCgpO1xuICAgICAgICAgICAgdGhpcy5zaG93TmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvdyBzdGVwIHByZXZpb3VzIHRvIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwXG4gICAgICogQG1ldGhvZCBzaG93UHJldlxuICAgICAqL1xuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5zaG93UHJldiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IHRoaXMuc3RlcHNbdGhpcy5zdGVwcy5pbmRleE9mKHRoaXMuY3VycmVudFN0ZXApIC0gMV07XG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl07XG4gICAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYW5jaG9yLnNob3dTdGVwKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBoaW50IGNvbXBvbmVudFxuICAgICAqIEBtZXRob2QgcmVnaXN0ZXJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgICAgc2VsZWN0b3IgIGJpbmRlZCB0b1xuICAgICAqIEBwYXJhbSAge1RvdXJDb21wb25lbnR9IGNvbXBvbmVudCBpdHNlbGZcbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGNvbXBvbmVudCkge1xuICAgICAgICBpZiAodGhpcy5hbmNob3JzW3NlbGVjdG9yXSkge1xuICAgICAgICAgICAgdGhyb3cgJ3NlbGVjdG9yICcgKyBzZWxlY3RvciArICcgYWxyZWFkeSByZWdpc3RlcmVkISc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmNob3JzW3NlbGVjdG9yXSA9IGNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5yZWdpc3RyYXRpb24kLm5leHQodHJ1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcCBoYXMgbmV4dFxuICAgICAqIEBtZXRob2QgaGFzTmV4dFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmhhc05leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgPCB0aGlzLnN0ZXBzLmxlbmd0aCAtIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcCBoYXMgcHJldmlvdXNcbiAgICAgKiBAbWV0aG9kIGhhc1ByZXZcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5oYXNQcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwcy5pbmRleE9mKHRoaXMuY3VycmVudFN0ZXApID4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmFsaXplIG91ciBoaW50IHRvdXIuXG4gICAgICogQG1ldGhvZCBlbmRcbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm92ZXJsYXkkLm5leHQoZmFsc2UpO1xuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xuICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIGFuY2hvci5oaWRlU3RlcCgpO1xuICAgICAgICB0aGlzLmZpbmlzaCQubmV4dCh0cnVlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0YXJ0IGhpbnQgdG91ciBhdCBzb21lIHBvc2l0aW9uXG4gICAgICogQG1ldGhvZCBzdGFydEF0XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBzdGVwSWQgcG9zaXRpb24gaW4gdGhpcy5zdGVwc1xuICAgICAqL1xuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5zdGFydEF0ID0gZnVuY3Rpb24gKHN0ZXBJZCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1tzdGVwSWRdO1xuICAgICAgICB0aGlzLnNob3codGhpcy5jdXJyZW50U3RlcCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IEVsZW1lbnRbXSB0byBTdGVwW11cbiAgICAgKiBAbWV0aG9kIGluaXRTdGVwc1xuICAgICAqIEBwYXJhbSAge05vZGVMaXN0T2Y8RWxlbWVudD59IG5vZGVzXG4gICAgICogQHJldHVybiB7U3RlcFtdfVxuICAgICAqL1xuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5pbml0U3RlcHMgPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgdmFyIHN0ZXBzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0ZXBzLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBub2Rlc1tpXS5nZXRBdHRyaWJ1dGUoJ3NlbGVjdG9yJyksXG4gICAgICAgICAgICAgICAgb3JkZXI6ICtub2Rlc1tpXS5nZXRBdHRyaWJ1dGUoJ29yZGVyJykgfHwgdGhpcy5oaW50T3B0aW9ucy5kZWZhdWx0T3JkZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RlcHMgPSBzdGVwcy5zb3J0KGZ1bmN0aW9uIChlbDEsIGVsMikge1xuICAgICAgICAgICAgcmV0dXJuIGVsMS5vcmRlciAtIGVsMi5vcmRlcjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUucHV0T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKTtcbiAgICB9O1xuICAgIEhpbnRTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5JbmplY3RhYmxlKClcbiAgICBdLCBIaW50U2VydmljZSk7XG4gICAgcmV0dXJuIEhpbnRTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydHMuSGludFNlcnZpY2UgPSBIaW50U2VydmljZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpbnQuc2VydmljZS5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuZXhwb3J0cy5IaW50Q29uZmlnID0ge1xuICAgIEhJTlRfVEFHOiAndG91ci1zdGVwJyxcbiAgICBERUZBVUxUX1BPU0lUSU9OOiAnYm90dG9tJyxcbiAgICBaX0lOREVYOiAnOTk5JyxcbiAgICBERUZBVUxUX09SREVSOiA5OSxcbiAgICBERUZBVUxUX1BYX0xBWUVSOiAxNSxcbiAgICBBUFBMWV9SRUxBVElWRTogdHJ1ZSxcbiAgICBESVNNSVNTX09OX09WRVJMQVk6IGZhbHNlLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhcmlhYmxlcy5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgaGludF9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuZXhwb3J0cy5IaW50U2VydmljZSA9IGhpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlO1xudmFyIGNvbW1vbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcbnZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xudmFyIGhpbnRfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xudmFyIHRvdXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuZXhwb3J0cy5Ub3VyQ29tcG9uZW50ID0gdG91cl9jb21wb25lbnRfMS5Ub3VyQ29tcG9uZW50O1xudmFyIEhpbnRNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGludE1vZHVsZSgpIHtcbiAgICB9XG4gICAgSGludE1vZHVsZV8xID0gSGludE1vZHVsZTtcbiAgICBIaW50TW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogSGludE1vZHVsZV8xLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2UsXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgSGludE1vZHVsZSA9IEhpbnRNb2R1bGVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuTmdNb2R1bGUoe1xuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbaGludF9jb21wb25lbnRfMS5IaW50Q29tcG9uZW50LCB0b3VyX2NvbXBvbmVudF8xLlRvdXJDb21wb25lbnRdLFxuICAgICAgICAgICAgZXhwb3J0czogW2hpbnRfY29tcG9uZW50XzEuSGludENvbXBvbmVudCwgdG91cl9jb21wb25lbnRfMS5Ub3VyQ29tcG9uZW50XSxcbiAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb25fMS5Db21tb25Nb2R1bGVdLFxuICAgICAgICB9KVxuICAgIF0sIEhpbnRNb2R1bGUpO1xuICAgIHJldHVybiBIaW50TW9kdWxlO1xuICAgIHZhciBIaW50TW9kdWxlXzE7XG59KCkpO1xuZXhwb3J0cy5IaW50TW9kdWxlID0gSGludE1vZHVsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG59XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKTtcblxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgaGludF9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xudmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgSGludENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIaW50Q29tcG9uZW50KGhpbnRTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UgPSBoaW50U2VydmljZTtcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5JC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF90aGlzLnNob3cgPSBkYXRhOyB9KTtcbiAgICB9XG4gICAgSGludENvbXBvbmVudC5wcm90b3R5cGUuZGlzbWlzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGlzbWlzc09uT3ZlcmxheSlcbiAgICAgICAgICAgIHRoaXMuaGludFNlcnZpY2Uub3ZlcmxheU5leHQoKTtcbiAgICB9O1xuICAgIEhpbnRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIHNlbGVjdG9yOiAndG91ci1vdmVybGF5JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9XFxcImhpbnQtb3ZlcmxheVxcXCIgKm5nSWY9XFxcInNob3dcXFwiIChjbGljayk9XFxcImRpc21pc3MoKVxcXCI+PC9kaXY+XCIsXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW2hpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlXSlcbiAgICBdLCBIaW50Q29tcG9uZW50KTtcbiAgICByZXR1cm4gSGludENvbXBvbmVudDtcbn0oKSk7XG5leHBvcnRzLkhpbnRDb21wb25lbnQgPSBIaW50Q29tcG9uZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGludC5jb21wb25lbnQuanMubWFwXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xudmFyIGhpbnRfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbnZhciB2YXJpYWJsZXNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG52YXIgVG91ckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUb3VyQ29tcG9uZW50KGhpbnRTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UgPSBoaW50U2VydmljZTtcbiAgICB9XG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UucmVnaXN0ZXIodGhpcy5zZWxlY3RvciwgdGhpcyk7XG4gICAgfTtcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5zaG93U3RlcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93aW5nU3RlcCQubmV4dCh0aGlzKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb24gfHwgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0UG9zaXRpb247XG4gICAgICAgIHRoaXMub3JkZXIgPSArdGhpcy5vcmRlciB8fCB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRPcmRlcjtcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VsZWN0b3IpO1xuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuc3R5bGUuekluZGV4ID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5aX0lOREVYO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZWxlbWVudHNEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUNsaWNrKGhpZ2hsaWdodGVkRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5hcHBseVJlbGF0aXZlKSB7XG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpbnQtcmVsYXRpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQ2xhc3MgPSAndHJhbnNmb3JtWF81MCB0cmFuc2Zvcm1ZXzEwMCc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCAtIHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdExheWVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0TGVmdCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRXaWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQ2xhc3MgPSAndHJhbnNmb3JtWF81MCc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgKyB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0IC0gdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQ2xhc3MgPSAndHJhbnNmb3JtWV81MCB0cmFuc2Zvcm1YXzEwMCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQ2xhc3MgPSAndHJhbnNmb3JtWV81MCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25ldXRyYWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRUb3AgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggKyB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9IHRoaXMuY3VzdG9tQ3NzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnSW52YWxpZCBoaW50IHBvc2l0aW9uIC0+JyArIHRoaXMucG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRvcFBvcyA9IDA7XG4gICAgICAgICAgICB0aGlzLmxlZnRQb3MgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hvd21lID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oYXNOZXh0ID0gdGhpcy5oaW50U2VydmljZS5oYXNOZXh0KCk7XG4gICAgICAgIHRoaXMuaGFzUHJldiA9IHRoaXMuaGludFNlcnZpY2UuaGFzUHJldigpO1xuICAgIH07XG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuaGlkZVN0ZXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoaWdobGlnaHRlZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKTtcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVkRWxlbWVudCkge1xuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LnN0eWxlLnpJbmRleCA9ICcwJztcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaW50LXJlbGF0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaG93bWUgPSBmYWxzZTtcbiAgICB9O1xuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmV4aXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UuZW5kKCk7XG4gICAgfTtcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhpZGVTdGVwKCk7XG4gICAgICAgIHRoaXMuaGludFNlcnZpY2Uuc2hvd05leHQoKTtcbiAgICB9O1xuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGlkZVN0ZXAoKTtcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93UHJldigpO1xuICAgIH07XG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuZGlzYWJsZUNsaWNrID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaW50LWRpc2FibGVkJyk7XG4gICAgfTtcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5lbmFibGVDbGljayA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGludC1kaXNhYmxlZCcpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9yZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcImN1c3RvbUNzc1wiLCB2b2lkIDApO1xuICAgIFRvdXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogdmFyaWFibGVzXzEuSGludENvbmZpZy5ISU5UX1RBRyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9XFxcImludHJvLXRvdXItaGludC13cmFwcGVyIHt7dHJhbnNmb3JtQ2xhc3N9fSBzdGVwe3tvcmRlcn19IHt7cG9zaXRpb259fVxcXCJcXG4gICpuZ0lmPVxcXCJzaG93bWVcXFwiIFtuZ1N0eWxlXT1cXFwieyd0b3AnOiB0b3BQb3MrJ3B4JywgJ2xlZnQnOiBsZWZ0UG9zKydweCd9XFxcIiA+XFxuICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlclxcXCIgKm5nSWY9XFxcInRpdGxlXFxcIj57e3RpdGxlfX08L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJmb290ZXJcXFwiPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJuYXZpZ2F0ZS1idG4gcHJldlxcXCIgKm5nSWY9XFxcImhhc1ByZXZcXFwiIChjbGljayk9XFxcInByZXYoKVxcXCI+JiM4NTkyOzwvYT5cXG4gICAgICA8YSBjbGFzcz1cXFwibmF2aWdhdGUtYnRuIG5leHRcXFwiICpuZ0lmPVxcXCJoYXNOZXh0XFxcIiAoY2xpY2spPVxcXCJuZXh0KClcXFwiPiYjODU5NDs8L2E+XFxuICAgICAgPGEgY2xhc3M9XFxcIm5hdmlnYXRlLWJ0biBleGl0XFxcIiAoY2xpY2spPVxcXCJleGl0KClcXFwiPiYjMTAwMDY7PC9hPlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlwiLFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtoaW50X3NlcnZpY2VfMS5IaW50U2VydmljZV0pXG4gICAgXSwgVG91ckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIFRvdXJDb21wb25lbnQ7XG59KCkpO1xuZXhwb3J0cy5Ub3VyQ29tcG9uZW50ID0gVG91ckNvbXBvbmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvdXIuY29tcG9uZW50LmpzLm1hcFxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB2YXJpYWJsZXNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG52YXIgSGludE9wdGlvbnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGludE9wdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHNEaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGVmYXVsdFBvc2l0aW9uID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5ERUZBVUxUX1BPU0lUSU9OO1xuICAgICAgICB0aGlzLmRlZmF1bHRPcmRlciA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuREVGQVVMVF9PUkRFUjtcbiAgICAgICAgdGhpcy5kZWZhdWx0TGF5ZXIgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUFhfTEFZRVI7XG4gICAgICAgIHRoaXMuYXBwbHlSZWxhdGl2ZSA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuQVBQTFlfUkVMQVRJVkU7XG4gICAgICAgIHRoaXMuc3RlcFRhZyA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuSElOVF9UQUc7XG4gICAgICAgIHRoaXMuZGlzbWlzc09uT3ZlcmxheSA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuRElTTUlTU19PTl9PVkVSTEFZO1xuICAgIH1cbiAgICByZXR1cm4gSGludE9wdGlvbnM7XG59KCkpO1xuZXhwb3J0cy5IaW50T3B0aW9ucyA9IEhpbnRPcHRpb25zO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3B0aW9ucy5qcy5tYXBcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X187XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYW5ndWxhci1jdXN0b20tdG91ci51bWQubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgM2U3NGNiYjIyZTNjZjkxZmRmYzUiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvY29yZVwiXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpO1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIik7XG52YXIgb3B0aW9uc18xID0gcmVxdWlyZShcIi4vb3B0aW9uc1wiKTtcbnZhciBIaW50U2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIaW50U2VydmljZSgpIHtcbiAgICAgICAgdGhpcy5hbmNob3JzID0ge307XG4gICAgICAgIHRoaXMub3ZlcmxheSQgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RyYXRpb24kID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuZmluaXNoJCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnNob3dpbmdTdGVwJCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGhpbnQgc2VydmljZVxuICAgICAqIEBtZXRob2QgaW5pdGlhbGl6ZVxuICAgICAqIEBwYXJhbSAge0hpbnRPcHRpb25zfSBvcHRpb25zIGluaXQgb3B0aW9uc1xuICAgICAqIEByZXR1cm4gdm9pZFxuICAgICAqL1xuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gbmV3IG9wdGlvbnNfMS5IaW50T3B0aW9ucygpOyB9XG4gICAgICAgIHRoaXMuaGludE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKG5ldyBvcHRpb25zXzEuSGludE9wdGlvbnMoKSwgb3B0aW9ucyk7XG4gICAgICAgIHZhciBub2RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRoaXMuaGludE9wdGlvbnMuc3RlcFRhZyk7XG4gICAgICAgIHRoaXMuc3RlcHMgPSB0aGlzLmluaXRTdGVwcyhub2Rlcyk7XG4gICAgICAgIHRoaXMuc3RhcnRBdCgwKTtcbiAgICAgICAgdGhpcy5vdmVybGF5JC5uZXh0KHRydWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvdyBzdGVwXG4gICAgICogQG1ldGhvZCBzaG93XG4gICAgICogQHBhcmFtICB7U3RlcH0gc3RlcCBbZGVzY3JpcHRpb25dXG4gICAgICovXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoc3RlcCkge1xuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3N0ZXAuc2VsZWN0b3JdO1xuICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFuY2hvci5zaG93U3RlcCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvdyBzdGVwIG5leHQgdG8ge1N0ZXB9IHRoaXMuY3VycmVudFN0ZXBcbiAgICAgKiBAbWV0aG9kIHNob3dOZXh0XG4gICAgICovXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1t0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgKyAxXTtcbiAgICAgICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yc1t0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yXTtcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhbmNob3Iuc2hvd1N0ZXAoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE9uIG92ZXJsYXkgY2xpY2sgYmVoYXZpb3VyXG4gICAgICogQG1ldGhvZCBvdmVybGF5TmV4dFxuICAgICAqL1xuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5vdmVybGF5TmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzTmV4dCgpKSB7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl0uaGlkZVN0ZXAoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd05leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNob3cgc3RlcCBwcmV2aW91cyB0byB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcFxuICAgICAqIEBtZXRob2Qgc2hvd1ByZXZcbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc2hvd1ByZXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSB0aGlzLnN0ZXBzW3RoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSAtIDFdO1xuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xuICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFuY2hvci5zaG93U3RlcCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgaGludCBjb21wb25lbnRcbiAgICAgKiBAbWV0aG9kIHJlZ2lzdGVyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgIHNlbGVjdG9yICBiaW5kZWQgdG9cbiAgICAgKiBAcGFyYW0gIHtUb3VyQ29tcG9uZW50fSBjb21wb25lbnQgaXRzZWxmXG4gICAgICovXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYW5jaG9yc1tzZWxlY3Rvcl0pIHtcbiAgICAgICAgICAgIHRocm93ICdzZWxlY3RvciAnICsgc2VsZWN0b3IgKyAnIGFscmVhZHkgcmVnaXN0ZXJlZCEnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5jaG9yc1tzZWxlY3Rvcl0gPSBjb21wb25lbnQ7XG4gICAgICAgIHRoaXMucmVnaXN0cmF0aW9uJC5uZXh0KHRydWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXMge1N0ZXB9IHRoaXMuY3VycmVudFN0ZXAgaGFzIG5leHRcbiAgICAgKiBAbWV0aG9kIGhhc05leHRcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwcy5pbmRleE9mKHRoaXMuY3VycmVudFN0ZXApIDwgdGhpcy5zdGVwcy5sZW5ndGggLSAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXMge1N0ZXB9IHRoaXMuY3VycmVudFN0ZXAgaGFzIHByZXZpb3VzXG4gICAgICogQG1ldGhvZCBoYXNQcmV2XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuaGFzUHJldiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5hbGl6ZSBvdXIgaGludCB0b3VyLlxuICAgICAqIEBtZXRob2QgZW5kXG4gICAgICovXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5JC5uZXh0KGZhbHNlKTtcbiAgICAgICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yc1t0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yXTtcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xuICAgICAgICBhbmNob3IuaGlkZVN0ZXAoKTtcbiAgICAgICAgdGhpcy5maW5pc2gkLm5leHQodHJ1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdGFydCBoaW50IHRvdXIgYXQgc29tZSBwb3NpdGlvblxuICAgICAqIEBtZXRob2Qgc3RhcnRBdFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gc3RlcElkIHBvc2l0aW9uIGluIHRoaXMuc3RlcHNcbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc3RhcnRBdCA9IGZ1bmN0aW9uIChzdGVwSWQpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IHRoaXMuc3RlcHNbc3RlcElkXTtcbiAgICAgICAgdGhpcy5zaG93KHRoaXMuY3VycmVudFN0ZXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29udmVydCBFbGVtZW50W10gdG8gU3RlcFtdXG4gICAgICogQG1ldGhvZCBpbml0U3RlcHNcbiAgICAgKiBAcGFyYW0gIHtOb2RlTGlzdE9mPEVsZW1lbnQ+fSBub2Rlc1xuICAgICAqIEByZXR1cm4ge1N0ZXBbXX1cbiAgICAgKi9cbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuaW5pdFN0ZXBzID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgIHZhciBzdGVwcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzdGVwcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rvcjogbm9kZXNbaV0uZ2V0QXR0cmlidXRlKCdzZWxlY3RvcicpLFxuICAgICAgICAgICAgICAgIG9yZGVyOiArbm9kZXNbaV0uZ2V0QXR0cmlidXRlKCdvcmRlcicpIHx8IHRoaXMuaGludE9wdGlvbnMuZGVmYXVsdE9yZGVyLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0ZXBzID0gc3RlcHMuc29ydChmdW5jdGlvbiAoZWwxLCBlbDIpIHtcbiAgICAgICAgICAgIHJldHVybiBlbDEub3JkZXIgLSBlbDIub3JkZXI7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnB1dE92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5Jyk7XG4gICAgfTtcbiAgICBIaW50U2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpXG4gICAgXSwgSGludFNlcnZpY2UpO1xuICAgIHJldHVybiBIaW50U2VydmljZTtcbn0oKSk7XG5leHBvcnRzLkhpbnRTZXJ2aWNlID0gSGludFNlcnZpY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaW50LnNlcnZpY2UuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGludC5zZXJ2aWNlLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydHMuSGludENvbmZpZyA9IHtcbiAgICBISU5UX1RBRzogJ3RvdXItc3RlcCcsXG4gICAgREVGQVVMVF9QT1NJVElPTjogJ2JvdHRvbScsXG4gICAgWl9JTkRFWDogJzk5OScsXG4gICAgREVGQVVMVF9PUkRFUjogOTksXG4gICAgREVGQVVMVF9QWF9MQVlFUjogMTUsXG4gICAgQVBQTFlfUkVMQVRJVkU6IHRydWUsXG4gICAgRElTTUlTU19PTl9PVkVSTEFZOiBmYWxzZSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YXJpYWJsZXMuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdmFyaWFibGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGhpbnRfc2VydmljZV8xID0gcmVxdWlyZShcIi4vaGludC5zZXJ2aWNlXCIpO1xuZXhwb3J0cy5IaW50U2VydmljZSA9IGhpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlO1xudmFyIGNvbW1vbl8xID0gcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKTtcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcbnZhciBoaW50X2NvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vaGludC5jb21wb25lbnRcIik7XG52YXIgdG91cl9jb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL2ludHJvLXRvdXIvdG91ci5jb21wb25lbnRcIik7XG5leHBvcnRzLlRvdXJDb21wb25lbnQgPSB0b3VyX2NvbXBvbmVudF8xLlRvdXJDb21wb25lbnQ7XG52YXIgSGludE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIaW50TW9kdWxlKCkge1xuICAgIH1cbiAgICBIaW50TW9kdWxlXzEgPSBIaW50TW9kdWxlO1xuICAgIEhpbnRNb2R1bGUuZm9yUm9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBIaW50TW9kdWxlXzEsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICBoaW50X3NlcnZpY2VfMS5IaW50U2VydmljZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBIaW50TW9kdWxlID0gSGludE1vZHVsZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5OZ01vZHVsZSh7XG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtoaW50X2NvbXBvbmVudF8xLkhpbnRDb21wb25lbnQsIHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudF0sXG4gICAgICAgICAgICBleHBvcnRzOiBbaGludF9jb21wb25lbnRfMS5IaW50Q29tcG9uZW50LCB0b3VyX2NvbXBvbmVudF8xLlRvdXJDb21wb25lbnRdLFxuICAgICAgICAgICAgaW1wb3J0czogW2NvbW1vbl8xLkNvbW1vbk1vZHVsZV0sXG4gICAgICAgIH0pXG4gICAgXSwgSGludE1vZHVsZSk7XG4gICAgcmV0dXJuIEhpbnRNb2R1bGU7XG4gICAgdmFyIEhpbnRNb2R1bGVfMTtcbn0oKSk7XG5leHBvcnRzLkhpbnRNb2R1bGUgPSBIaW50TW9kdWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0ICogZnJvbSAnLi9zcmMnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9hbmd1bGFyMi10ZW1wbGF0ZS1sb2FkZXIhLi9pbmRleC50cyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBoaW50X3NlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2hpbnQuc2VydmljZVwiKTtcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcbnZhciBIaW50Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEhpbnRDb21wb25lbnQoaGludFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5oaW50U2VydmljZSA9IGhpbnRTZXJ2aWNlO1xuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlLm92ZXJsYXkkLnN1YnNjcmliZShmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMuc2hvdyA9IGRhdGE7IH0pO1xuICAgIH1cbiAgICBIaW50Q29tcG9uZW50LnByb3RvdHlwZS5kaXNtaXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kaXNtaXNzT25PdmVybGF5KVxuICAgICAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5TmV4dCgpO1xuICAgIH07XG4gICAgSGludENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgc2VsZWN0b3I6ICd0b3VyLW92ZXJsYXknLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiaGludC1vdmVybGF5XFxcIiAqbmdJZj1cXFwic2hvd1xcXCIgKGNsaWNrKT1cXFwiZGlzbWlzcygpXFxcIj48L2Rpdj5cIixcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2VdKVxuICAgIF0sIEhpbnRDb21wb25lbnQpO1xuICAgIHJldHVybiBIaW50Q29tcG9uZW50O1xufSgpKTtcbmV4cG9ydHMuSGludENvbXBvbmVudCA9IEhpbnRDb21wb25lbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaW50LmNvbXBvbmVudC5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oaW50LmNvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgY29yZV8xID0gcmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIik7XG52YXIgaGludF9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi4vaGludC5zZXJ2aWNlXCIpO1xudmFyIHZhcmlhYmxlc18xID0gcmVxdWlyZShcIi4uL3ZhcmlhYmxlc1wiKTtcbnZhciBUb3VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRvdXJDb21wb25lbnQoaGludFNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5oaW50U2VydmljZSA9IGhpbnRTZXJ2aWNlO1xuICAgIH1cbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5yZWdpc3Rlcih0aGlzLnNlbGVjdG9yLCB0aGlzKTtcbiAgICB9O1xuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLnNob3dTdGVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlLnNob3dpbmdTdGVwJC5uZXh0KHRoaXMpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiB8fCB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRQb3NpdGlvbjtcbiAgICAgICAgdGhpcy5vcmRlciA9ICt0aGlzLm9yZGVyIHx8IHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdE9yZGVyO1xuICAgICAgICB2YXIgaGlnaGxpZ2h0ZWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWxlY3Rvcik7XG4gICAgICAgIGlmIChoaWdobGlnaHRlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkRWxlbWVudC5zdHlsZS56SW5kZXggPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLlpfSU5ERVg7XG4gICAgICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5lbGVtZW50c0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmFwcGx5UmVsYXRpdmUpIHtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGludC1yZWxhdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1YXzUwIHRyYW5zZm9ybVlfMTAwJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wIC0gdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1YXzUwJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCArIHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdExheWVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0TGVmdCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRXaWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRUb3AgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgLSB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1ZXzUwIHRyYW5zZm9ybVhfMTAwJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRUb3AgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggKyB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1ZXzUwJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbmV1dHJhbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0TGVmdCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRXaWR0aCArIHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdExheWVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gdGhpcy5jdXN0b21Dc3M7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdJbnZhbGlkIGhpbnQgcG9zaXRpb24gLT4nICsgdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9wUG9zID0gMDtcbiAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaG93bWUgPSB0cnVlO1xuICAgICAgICB0aGlzLmhhc05leHQgPSB0aGlzLmhpbnRTZXJ2aWNlLmhhc05leHQoKTtcbiAgICAgICAgdGhpcy5oYXNQcmV2ID0gdGhpcy5oaW50U2VydmljZS5oYXNQcmV2KCk7XG4gICAgfTtcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5oaWRlU3RlcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VsZWN0b3IpO1xuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVDbGljayhoaWdobGlnaHRlZEVsZW1lbnQpO1xuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpbnQtcmVsYXRpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNob3dtZSA9IGZhbHNlO1xuICAgIH07XG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuZXhpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5lbmQoKTtcbiAgICB9O1xuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGlkZVN0ZXAoKTtcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93TmV4dCgpO1xuICAgIH07XG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaWRlU3RlcCgpO1xuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlLnNob3dQcmV2KCk7XG4gICAgfTtcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5kaXNhYmxlQ2xpY2sgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpbnQtZGlzYWJsZWQnKTtcbiAgICB9O1xuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmVuYWJsZUNsaWNrID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaW50LWRpc2FibGVkJyk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLklucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLklucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLklucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwib3JkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLklucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLklucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY3VzdG9tQ3NzXCIsIHZvaWQgMCk7XG4gICAgVG91ckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkhJTlRfVEFHLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiaW50cm8tdG91ci1oaW50LXdyYXBwZXIge3t0cmFuc2Zvcm1DbGFzc319IHN0ZXB7e29yZGVyfX0ge3twb3NpdGlvbn19XFxcIlxcbiAgKm5nSWY9XFxcInNob3dtZVxcXCIgW25nU3R5bGVdPVxcXCJ7J3RvcCc6IHRvcFBvcysncHgnLCAnbGVmdCc6IGxlZnRQb3MrJ3B4J31cXFwiID5cXG4gICAgPGRpdiBjbGFzcz1cXFwiaGVhZGVyXFxcIiAqbmdJZj1cXFwidGl0bGVcXFwiPnt7dGl0bGV9fTwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50XFxcIj48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImZvb3RlclxcXCI+XFxuICAgICAgPGEgY2xhc3M9XFxcIm5hdmlnYXRlLWJ0biBwcmV2XFxcIiAqbmdJZj1cXFwiaGFzUHJldlxcXCIgKGNsaWNrKT1cXFwicHJldigpXFxcIj4mIzg1OTI7PC9hPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJuYXZpZ2F0ZS1idG4gbmV4dFxcXCIgKm5nSWY9XFxcImhhc05leHRcXFwiIChjbGljayk9XFxcIm5leHQoKVxcXCI+JiM4NTk0OzwvYT5cXG4gICAgICA8YSBjbGFzcz1cXFwibmF2aWdhdGUtYnRuIGV4aXRcXFwiIChjbGljayk9XFxcImV4aXQoKVxcXCI+JiMxMDAwNjs8L2E+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XCIsXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW2hpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlXSlcbiAgICBdLCBUb3VyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gVG91ckNvbXBvbmVudDtcbn0oKSk7XG5leHBvcnRzLlRvdXJDb21wb25lbnQgPSBUb3VyQ29tcG9uZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG91ci5jb21wb25lbnQuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW50cm8tdG91ci90b3VyLmNvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB2YXJpYWJsZXNfMSA9IHJlcXVpcmUoXCIuL3ZhcmlhYmxlc1wiKTtcbnZhciBIaW50T3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIaW50T3B0aW9ucygpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c0Rpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kZWZhdWx0UG9zaXRpb24gPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUE9TSVRJT047XG4gICAgICAgIHRoaXMuZGVmYXVsdE9yZGVyID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5ERUZBVUxUX09SREVSO1xuICAgICAgICB0aGlzLmRlZmF1bHRMYXllciA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuREVGQVVMVF9QWF9MQVlFUjtcbiAgICAgICAgdGhpcy5hcHBseVJlbGF0aXZlID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5BUFBMWV9SRUxBVElWRTtcbiAgICAgICAgdGhpcy5zdGVwVGFnID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5ISU5UX1RBRztcbiAgICAgICAgdGhpcy5kaXNtaXNzT25PdmVybGF5ID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5ESVNNSVNTX09OX09WRVJMQVk7XG4gICAgfVxuICAgIHJldHVybiBIaW50T3B0aW9ucztcbn0oKSk7XG5leHBvcnRzLkhpbnRPcHRpb25zID0gSGludE9wdGlvbnM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcHRpb25zLmpzLm1hcFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL29wdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBhbmd1bGFyL2NvbW1vblwiXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJyeGpzL1N1YmplY3RcIlxuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9