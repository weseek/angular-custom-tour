!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("@angular/common"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common","rxjs/Subject"],e):"object"==typeof exports?exports["angular-custom-tour"]=e(require("@angular/core"),require("@angular/common"),require("rxjs/Subject")):t["angular-custom-tour"]=e(t["@angular/core"],t["@angular/common"],t["rxjs/Subject"])}(this,function(t,e,i){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=4)}([function(e,i){e.exports=t},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),r=i(9),s=i(7),c=function(){function t(){this.anchors={},this.overlay$=new r.Subject,this.registration$=new r.Subject,this.finish$=new r.Subject,this.showingStep$=new r.Subject}return t.prototype.initialize=function(t){void 0===t&&(t=new s.HintOptions),this.hintOptions=Object.assign(new s.HintOptions,t);var e=document.getElementsByTagName(this.hintOptions.stepTag);this.steps=this.initSteps(e),this.startAt(0),this.overlay$.next(!0)},t.prototype.show=function(t){var e=this.anchors[t.selector];e&&e.showStep()},t.prototype.showNext=function(){this.currentStep=this.steps[this.steps.indexOf(this.currentStep)+1];var t=this.anchors[this.currentStep.selector];t&&t.showStep()},t.prototype.overlayNext=function(){this.hasNext()?(this.anchors[this.currentStep.selector].hideStep(),this.showNext()):this.end()},t.prototype.showPrev=function(){this.currentStep=this.steps[this.steps.indexOf(this.currentStep)-1];var t=this.anchors[this.currentStep.selector];t&&t.showStep()},t.prototype.register=function(t,e){if(this.anchors[t])throw"selector "+t+" already registered!";this.anchors[t]=e,this.registration$.next(!0)},t.prototype.hasNext=function(){return this.steps.indexOf(this.currentStep)<this.steps.length-1},t.prototype.hasPrev=function(){return this.steps.indexOf(this.currentStep)>0},t.prototype.end=function(){this.overlay$.next(!1);var t=this.anchors[this.currentStep.selector];t&&(this.currentStep=void 0,t.hideStep(),this.finish$.next(!0))},t.prototype.startAt=function(t){this.currentStep=this.steps[t],this.show(this.currentStep)},t.prototype.initSteps=function(t){for(var e=[],i=0;i<t.length;i++)e.push({selector:t[i].getAttribute("selector"),order:+t[i].getAttribute("order")||this.hintOptions.defaultOrder});return e=e.sort(function(t,e){return t.order-e.order})},t.prototype.putOverlay=function(){document.getElementsByTagName("body")},t=n([o.Injectable()],t)}();e.HintService=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HintConfig={HINT_TAG:"tour-step",DEFAULT_POSITION:"bottom",Z_INDEX:"999",DEFAULT_ORDER:99,DEFAULT_PX_LAYER:15,APPLY_RELATIVE:!0,DISMISS_ON_OVERLAY:!1}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.HintService=o.HintService;var r=i(8),s=i(0),c=i(5),h=i(6);e.TourComponent=h.TourComponent;var a=function(){function t(){}return e=t,t.forRoot=function(){return{ngModule:e,providers:[o.HintService]}},t=e=n([s.NgModule({declarations:[c.HintComponent,h.TourComponent],exports:[c.HintComponent,h.TourComponent],imports:[r.CommonModule]})],t);var e}();e.HintModule=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(3))},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=i(0),c=function(){function t(t){var e=this;this.hintService=t,this.hintService.overlay$.subscribe(function(t){return e.show=t})}return t.prototype.dismiss=function(){this.hintService.hintOptions.dismissOnOverlay&&this.hintService.overlayNext()},t=n([s.Component({selector:"tour-overlay",template:'<div class="hint-overlay" *ngIf="show" (click)="dismiss()"></div>'}),o("design:paramtypes",[r.HintService])],t)}();e.HintComponent=c},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(1),c=i(2),h=function(){function t(t){this.hintService=t,this.nextEventEmitter=new r.EventEmitter,this.prevEventEmitter=new r.EventEmitter,this.exitEventEmitter=new r.EventEmitter}return t.prototype.ngOnInit=function(){this.hintService.register(this.selector,this)},t.prototype.showStep=function(){this.hintService.showingStep$.next(this),this.position=this.position||this.hintService.hintOptions.defaultPosition,this.order=+this.order||this.hintService.hintOptions.defaultOrder;var t=document.getElementById(this.selector);if(t)switch(t.style.zIndex=c.HintConfig.Z_INDEX,this.hintService.hintOptions.elementsDisabled&&this.disableClick(t),this.hintService.hintOptions.applyRelative&&t.classList.add("hint-relative"),this.position){case"top":this.transformClass="transformX_50 transformY_100",this.topPos=t.offsetTop-this.hintService.hintOptions.defaultLayer,this.leftPos=t.offsetLeft+t.offsetWidth/2;break;case"bottom":this.transformClass="transformX_50",this.topPos=t.offsetTop+t.offsetHeight+this.hintService.hintOptions.defaultLayer,this.leftPos=t.offsetLeft+t.offsetWidth/2;break;case"left":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft-this.hintService.hintOptions.defaultLayer,this.transformClass="transformY_50 transformX_100";break;case"right":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft+t.offsetWidth+this.hintService.hintOptions.defaultLayer,this.transformClass="transformY_50";break;case"neutral":this.topPos=t.offsetTop+t.offsetHeight/2,this.leftPos=t.offsetLeft+t.offsetWidth+this.hintService.hintOptions.defaultLayer,this.transformClass=this.customCss;break;default:throw"Invalid hint position ->"+this.position}else this.topPos=0,this.leftPos=0;this.showme=!0,this.hasNext=this.hintService.hasNext(),this.hasPrev=this.hintService.hasPrev()},t.prototype.hideStep=function(){var t=document.getElementById(this.selector);t&&(t.style.zIndex="0",this.enableClick(t),t.classList.remove("hint-relative")),this.showme=!1},t.prototype.exit=function(){this.exitEventEmitter.emit(),this.hintService.end()},t.prototype.next=function(){this.nextEventEmitter.emit(),this.hideStep(),this.hintService.showNext()},t.prototype.prev=function(){this.prevEventEmitter.emit(),this.hideStep(),this.hintService.showPrev()},t.prototype.disableClick=function(t){t.classList.add("hint-disabled")},t.prototype.enableClick=function(t){t.classList.remove("hint-disabled")},n([r.Input(),o("design:type",String)],t.prototype,"title",void 0),n([r.Input(),o("design:type",String)],t.prototype,"selector",void 0),n([r.Input(),o("design:type",Number)],t.prototype,"order",void 0),n([r.Input(),o("design:type",String)],t.prototype,"position",void 0),n([r.Input(),o("design:type",String)],t.prototype,"customCss",void 0),n([r.Output(),o("design:type",r.EventEmitter)],t.prototype,"nextEventEmitter",void 0),n([r.Output(),o("design:type",r.EventEmitter)],t.prototype,"prevEventEmitter",void 0),n([r.Output(),o("design:type",r.EventEmitter)],t.prototype,"exitEventEmitter",void 0),t=n([r.Component({selector:c.HintConfig.HINT_TAG,template:'<div class="intro-tour-hint-wrapper {{transformClass}} step{{order}} {{position}}"\n  *ngIf="showme" [ngStyle]="{\'top\': topPos+\'px\', \'left\': leftPos+\'px\'}" >\n    <div class="header" *ngIf="title">{{title}}</div>\n    <div class="content"><ng-content></ng-content></div>\n    <div class="footer">\n      <a class="navigate-btn prev" *ngIf="hasPrev" (click)="prev()">&#8592;</a>\n      <a class="navigate-btn next" *ngIf="hasNext" (click)="next()">&#8594;</a>\n      <a class="navigate-btn exit" (click)="exit()">&#10006;</a>\n    </div>\n  </div>'}),o("design:paramtypes",[s.HintService])],t)}();e.TourComponent=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(){function t(){this.elementsDisabled=!0,this.defaultPosition=n.HintConfig.DEFAULT_POSITION,this.defaultOrder=n.HintConfig.DEFAULT_ORDER,this.defaultLayer=n.HintConfig.DEFAULT_PX_LAYER,this.applyRelative=n.HintConfig.APPLY_RELATIVE,this.stepTag=n.HintConfig.HINT_TAG,this.dismissOnOverlay=n.HintConfig.DISMISS_ON_OVERLAY}return t}();e.HintOptions=o},function(t,i){t.exports=e},function(t,e){t.exports=i}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9hbmd1bGFyLWN1c3RvbS10b3VyLnVtZC5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGM2MTVkNTNiOTA1ODRjNTYyNzg4Iiwid2VicGFjazovLy9leHRlcm5hbCBcIkBhbmd1bGFyL2NvcmVcIiIsIndlYnBhY2s6Ly8vLi9zcmMvaGludC5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy92YXJpYWJsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9oaW50LmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50cm8tdG91ci90b3VyLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvb3B0aW9ucy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYW5ndWxhci9jb21tb25cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyeGpzL1N1YmplY3RcIiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19kZWNvcmF0ZSIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImNvcmVfMSIsIlN1YmplY3RfMSIsIm9wdGlvbnNfMSIsIkhpbnRTZXJ2aWNlIiwiYW5jaG9ycyIsIm92ZXJsYXkkIiwiU3ViamVjdCIsInJlZ2lzdHJhdGlvbiQiLCJmaW5pc2gkIiwic2hvd2luZ1N0ZXAkIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJIaW50T3B0aW9ucyIsImhpbnRPcHRpb25zIiwiYXNzaWduIiwibm9kZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3RlcFRhZyIsInN0ZXBzIiwiaW5pdFN0ZXBzIiwic3RhcnRBdCIsIm5leHQiLCJzaG93Iiwic3RlcCIsImFuY2hvciIsInNlbGVjdG9yIiwic2hvd1N0ZXAiLCJzaG93TmV4dCIsImN1cnJlbnRTdGVwIiwiaW5kZXhPZiIsIm92ZXJsYXlOZXh0IiwiaGFzTmV4dCIsImhpZGVTdGVwIiwiZW5kIiwic2hvd1ByZXYiLCJyZWdpc3RlciIsImNvbXBvbmVudCIsImhhc1ByZXYiLCJ1bmRlZmluZWQiLCJzdGVwSWQiLCJwdXNoIiwiZ2V0QXR0cmlidXRlIiwib3JkZXIiLCJkZWZhdWx0T3JkZXIiLCJzb3J0IiwiZWwxIiwiZWwyIiwicHV0T3ZlcmxheSIsIkluamVjdGFibGUiLCJIaW50Q29uZmlnIiwiSElOVF9UQUciLCJERUZBVUxUX1BPU0lUSU9OIiwiWl9JTkRFWCIsIkRFRkFVTFRfT1JERVIiLCJERUZBVUxUX1BYX0xBWUVSIiwiQVBQTFlfUkVMQVRJVkUiLCJESVNNSVNTX09OX09WRVJMQVkiLCJoaW50X3NlcnZpY2VfMSIsImNvbW1vbl8xIiwiaGludF9jb21wb25lbnRfMSIsInRvdXJfY29tcG9uZW50XzEiLCJUb3VyQ29tcG9uZW50IiwiSGludE1vZHVsZSIsIkhpbnRNb2R1bGVfMSIsImZvclJvb3QiLCJuZ01vZHVsZSIsInByb3ZpZGVycyIsIk5nTW9kdWxlIiwiZGVjbGFyYXRpb25zIiwiSGludENvbXBvbmVudCIsImltcG9ydHMiLCJDb21tb25Nb2R1bGUiLCJfX21ldGFkYXRhIiwiayIsInYiLCJtZXRhZGF0YSIsImhpbnRTZXJ2aWNlIiwiX3RoaXMiLCJzdWJzY3JpYmUiLCJkYXRhIiwiZGlzbWlzcyIsImRpc21pc3NPbk92ZXJsYXkiLCJDb21wb25lbnQiLCJ0ZW1wbGF0ZSIsInZhcmlhYmxlc18xIiwibmV4dEV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInByZXZFdmVudEVtaXR0ZXIiLCJleGl0RXZlbnRFbWl0dGVyIiwibmdPbkluaXQiLCJwb3NpdGlvbiIsImRlZmF1bHRQb3NpdGlvbiIsImhpZ2hsaWdodGVkRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJ6SW5kZXgiLCJlbGVtZW50c0Rpc2FibGVkIiwiZGlzYWJsZUNsaWNrIiwiYXBwbHlSZWxhdGl2ZSIsImNsYXNzTGlzdCIsImFkZCIsInRyYW5zZm9ybUNsYXNzIiwidG9wUG9zIiwib2Zmc2V0VG9wIiwiZGVmYXVsdExheWVyIiwibGVmdFBvcyIsIm9mZnNldExlZnQiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsImN1c3RvbUNzcyIsInNob3dtZSIsImVuYWJsZUNsaWNrIiwicmVtb3ZlIiwiZXhpdCIsImVtaXQiLCJwcmV2IiwiZWxlbWVudCIsIklucHV0IiwiU3RyaW5nIiwiTnVtYmVyIiwiT3V0cHV0Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLGlCQUFBQSxRQUFBLG1CQUFBQSxRQUFBLGlCQUNBLGtCQUFBQyxnQkFBQUMsSUFDQUQsUUFBQSxrREFBQUosR0FDQSxnQkFBQUMsU0FDQUEs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QW5DLFdBQUFPLG1CQUVBLE1BQUE3QyxLQUVBM0QsR0FBQTJELGVUcWhCTSxTQUFVMUQsRUFBUUQsR1VwaUJ4QkMsRUFBQUQsUUFBQU8sR1YwaUJNLFNBQVVOLEVBQVFELEdXMWlCeEJDLEVBQUFELFFBQUFRIiwiZmlsZSI6ImFuZ3VsYXItY3VzdG9tLXRvdXIudW1kLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIiksIHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIiksIHJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQGFuZ3VsYXIvY29yZVwiLCBcIkBhbmd1bGFyL2NvbW1vblwiLCBcInJ4anMvU3ViamVjdFwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJhbmd1bGFyLWN1c3RvbS10b3VyXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKSwgcmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiYW5ndWxhci1jdXN0b20tdG91clwiXSA9IGZhY3Rvcnkocm9vdFtcIkBhbmd1bGFyL2NvcmVcIl0sIHJvb3RbXCJAYW5ndWxhci9jb21tb25cIl0sIHJvb3RbXCJyeGpzL1N1YmplY3RcIl0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBhbmd1bGFyL2NvcmVcIiwgXCJAYW5ndWxhci9jb21tb25cIiwgXCJyeGpzL1N1YmplY3RcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1jdXN0b20tdG91clwiXSA9IGZhY3RvcnkocmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIiksIHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIiksIHJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImFuZ3VsYXItY3VzdG9tLXRvdXJcIl0gPSBmYWN0b3J5KHJvb3RbXCJAYW5ndWxhci9jb3JlXCJdLCByb290W1wiQGFuZ3VsYXIvY29tbW9uXCJdLCByb290W1wicnhqcy9TdWJqZWN0XCJdKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X18pIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX187XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xyXG52YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcclxudmFyIG9wdGlvbnNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcbnZhciBIaW50U2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhpbnRTZXJ2aWNlKCkge1xyXG4gICAgICAgIHRoaXMuYW5jaG9ycyA9IHt9O1xyXG4gICAgICAgIHRoaXMub3ZlcmxheSQgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbiQgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcclxuICAgICAgICB0aGlzLmZpbmlzaCQgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcclxuICAgICAgICB0aGlzLnNob3dpbmdTdGVwJCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGhpbnQgc2VydmljZVxyXG4gICAgICogQG1ldGhvZCBpbml0aWFsaXplXHJcbiAgICAgKiBAcGFyYW0gIHtIaW50T3B0aW9uc30gb3B0aW9ucyBpbml0IG9wdGlvbnNcclxuICAgICAqIEByZXR1cm4gdm9pZFxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gbmV3IG9wdGlvbnNfMS5IaW50T3B0aW9ucygpOyB9XHJcbiAgICAgICAgdGhpcy5oaW50T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24obmV3IG9wdGlvbnNfMS5IaW50T3B0aW9ucygpLCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgbm9kZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0aGlzLmhpbnRPcHRpb25zLnN0ZXBUYWcpO1xyXG4gICAgICAgIHRoaXMuc3RlcHMgPSB0aGlzLmluaXRTdGVwcyhub2Rlcyk7XHJcbiAgICAgICAgdGhpcy5zdGFydEF0KDApO1xyXG4gICAgICAgIHRoaXMub3ZlcmxheSQubmV4dCh0cnVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNob3cgc3RlcFxyXG4gICAgICogQG1ldGhvZCBzaG93XHJcbiAgICAgKiBAcGFyYW0gIHtTdGVwfSBzdGVwIFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoc3RlcCkge1xyXG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbc3RlcC5zZWxlY3Rvcl07XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbmNob3Iuc2hvd1N0ZXAoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNob3cgc3RlcCBuZXh0IHRvIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwXHJcbiAgICAgKiBAbWV0aG9kIHNob3dOZXh0XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5zaG93TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1t0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgKyAxXTtcclxuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xyXG4gICAgICAgIGlmICghYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5jaG9yLnNob3dTdGVwKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBPbiBvdmVybGF5IGNsaWNrIGJlaGF2aW91clxyXG4gICAgICogQG1ldGhvZCBvdmVybGF5TmV4dFxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUub3ZlcmxheU5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yc1t0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yXS5oaWRlU3RlcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dOZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVuZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNob3cgc3RlcCBwcmV2aW91cyB0byB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcFxyXG4gICAgICogQG1ldGhvZCBzaG93UHJldlxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc2hvd1ByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IHRoaXMuc3RlcHNbdGhpcy5zdGVwcy5pbmRleE9mKHRoaXMuY3VycmVudFN0ZXApIC0gMV07XHJcbiAgICAgICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yc1t0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yXTtcclxuICAgICAgICBpZiAoIWFuY2hvcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuY2hvci5zaG93U3RlcCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgaGludCBjb21wb25lbnRcclxuICAgICAqIEBtZXRob2QgcmVnaXN0ZXJcclxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgICAgICAgICBzZWxlY3RvciAgYmluZGVkIHRvXHJcbiAgICAgKiBAcGFyYW0gIHtUb3VyQ29tcG9uZW50fSBjb21wb25lbnQgaXRzZWxmXHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChzZWxlY3RvciwgY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYW5jaG9yc1tzZWxlY3Rvcl0pIHtcclxuICAgICAgICAgICAgdGhyb3cgJ3NlbGVjdG9yICcgKyBzZWxlY3RvciArICcgYWxyZWFkeSByZWdpc3RlcmVkISc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYW5jaG9yc1tzZWxlY3Rvcl0gPSBjb21wb25lbnQ7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RyYXRpb24kLm5leHQodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJcyB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcCBoYXMgbmV4dFxyXG4gICAgICogQG1ldGhvZCBoYXNOZXh0XHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuaGFzTmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGVwcy5pbmRleE9mKHRoaXMuY3VycmVudFN0ZXApIDwgdGhpcy5zdGVwcy5sZW5ndGggLSAxO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSXMge1N0ZXB9IHRoaXMuY3VycmVudFN0ZXAgaGFzIHByZXZpb3VzXHJcbiAgICAgKiBAbWV0aG9kIGhhc1ByZXZcclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5oYXNQcmV2ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgPiAwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRmluYWxpemUgb3VyIGhpbnQgdG91ci5cclxuICAgICAqIEBtZXRob2QgZW5kXHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5JC5uZXh0KGZhbHNlKTtcclxuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xyXG4gICAgICAgIGlmICghYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBhbmNob3IuaGlkZVN0ZXAoKTtcclxuICAgICAgICB0aGlzLmZpbmlzaCQubmV4dCh0cnVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IGhpbnQgdG91ciBhdCBzb21lIHBvc2l0aW9uXHJcbiAgICAgKiBAbWV0aG9kIHN0YXJ0QXRcclxuICAgICAqIEBwYXJhbSAge251bWJlcn0gc3RlcElkIHBvc2l0aW9uIGluIHRoaXMuc3RlcHNcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnN0YXJ0QXQgPSBmdW5jdGlvbiAoc3RlcElkKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IHRoaXMuc3RlcHNbc3RlcElkXTtcclxuICAgICAgICB0aGlzLnNob3codGhpcy5jdXJyZW50U3RlcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IEVsZW1lbnRbXSB0byBTdGVwW11cclxuICAgICAqIEBtZXRob2QgaW5pdFN0ZXBzXHJcbiAgICAgKiBAcGFyYW0gIHtOb2RlTGlzdE9mPEVsZW1lbnQ+fSBub2Rlc1xyXG4gICAgICogQHJldHVybiB7U3RlcFtdfVxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuaW5pdFN0ZXBzID0gZnVuY3Rpb24gKG5vZGVzKSB7XHJcbiAgICAgICAgdmFyIHN0ZXBzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBzdGVwcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBub2Rlc1tpXS5nZXRBdHRyaWJ1dGUoJ3NlbGVjdG9yJyksXHJcbiAgICAgICAgICAgICAgICBvcmRlcjogK25vZGVzW2ldLmdldEF0dHJpYnV0ZSgnb3JkZXInKSB8fCB0aGlzLmhpbnRPcHRpb25zLmRlZmF1bHRPcmRlcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdGVwcyA9IHN0ZXBzLnNvcnQoZnVuY3Rpb24gKGVsMSwgZWwyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbDEub3JkZXIgLSBlbDIub3JkZXI7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnB1dE92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKTtcclxuICAgIH07XHJcbiAgICBIaW50U2VydmljZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbmplY3RhYmxlKClcclxuICAgIF0sIEhpbnRTZXJ2aWNlKTtcclxuICAgIHJldHVybiBIaW50U2VydmljZTtcclxufSgpKTtcclxuZXhwb3J0cy5IaW50U2VydmljZSA9IEhpbnRTZXJ2aWNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaW50LnNlcnZpY2UuanMubWFwXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXHJcbmV4cG9ydHMuSGludENvbmZpZyA9IHtcclxuICAgIEhJTlRfVEFHOiAndG91ci1zdGVwJyxcclxuICAgIERFRkFVTFRfUE9TSVRJT046ICdib3R0b20nLFxyXG4gICAgWl9JTkRFWDogJzk5OScsXHJcbiAgICBERUZBVUxUX09SREVSOiA5OSxcclxuICAgIERFRkFVTFRfUFhfTEFZRVI6IDE1LFxyXG4gICAgQVBQTFlfUkVMQVRJVkU6IHRydWUsXHJcbiAgICBESVNNSVNTX09OX09WRVJMQVk6IGZhbHNlLFxyXG59O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD12YXJpYWJsZXMuanMubWFwXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBoaW50X3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcbmV4cG9ydHMuSGludFNlcnZpY2UgPSBoaW50X3NlcnZpY2VfMS5IaW50U2VydmljZTtcclxudmFyIGNvbW1vbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcclxudmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XHJcbnZhciBoaW50X2NvbXBvbmVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcclxudmFyIHRvdXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xyXG5leHBvcnRzLlRvdXJDb21wb25lbnQgPSB0b3VyX2NvbXBvbmVudF8xLlRvdXJDb21wb25lbnQ7XHJcbnZhciBIaW50TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGludE1vZHVsZSgpIHtcclxuICAgIH1cclxuICAgIEhpbnRNb2R1bGVfMSA9IEhpbnRNb2R1bGU7XHJcbiAgICBIaW50TW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmdNb2R1bGU6IEhpbnRNb2R1bGVfMSxcclxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgICAgICAgICBoaW50X3NlcnZpY2VfMS5IaW50U2VydmljZSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEhpbnRNb2R1bGUgPSBIaW50TW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuTmdNb2R1bGUoe1xyXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtoaW50X2NvbXBvbmVudF8xLkhpbnRDb21wb25lbnQsIHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudF0sXHJcbiAgICAgICAgICAgIGV4cG9ydHM6IFtoaW50X2NvbXBvbmVudF8xLkhpbnRDb21wb25lbnQsIHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudF0sXHJcbiAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb25fMS5Db21tb25Nb2R1bGVdLFxyXG4gICAgICAgIH0pXHJcbiAgICBdLCBIaW50TW9kdWxlKTtcclxuICAgIHJldHVybiBIaW50TW9kdWxlO1xyXG4gICAgdmFyIEhpbnRNb2R1bGVfMTtcclxufSgpKTtcclxuZXhwb3J0cy5IaW50TW9kdWxlID0gSGludE1vZHVsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKTtcclxuXG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgaGludF9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG52YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxudmFyIEhpbnRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIaW50Q29tcG9uZW50KGhpbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlID0gaGludFNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5JC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF90aGlzLnNob3cgPSBkYXRhOyB9KTtcclxuICAgIH1cclxuICAgIEhpbnRDb21wb25lbnQucHJvdG90eXBlLmRpc21pc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGlzbWlzc09uT3ZlcmxheSlcclxuICAgICAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5TmV4dCgpO1xyXG4gICAgfTtcclxuICAgIEhpbnRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXHJcbiAgICAgICAgICAgIHNlbGVjdG9yOiAndG91ci1vdmVybGF5JyxcclxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiaGludC1vdmVybGF5XFxcIiAqbmdJZj1cXFwic2hvd1xcXCIgKGNsaWNrKT1cXFwiZGlzbWlzcygpXFxcIj48L2Rpdj5cIixcclxuICAgICAgICB9KSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW2hpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlXSlcclxuICAgIF0sIEhpbnRDb21wb25lbnQpO1xyXG4gICAgcmV0dXJuIEhpbnRDb21wb25lbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSGludENvbXBvbmVudCA9IEhpbnRDb21wb25lbnQ7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpbnQuY29tcG9uZW50LmpzLm1hcFxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XHJcbnZhciBoaW50X3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcbnZhciB2YXJpYWJsZXNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcbnZhciBUb3VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVG91ckNvbXBvbmVudChoaW50U2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UgPSBoaW50U2VydmljZTtcclxuICAgICAgICB0aGlzLm5leHRFdmVudEVtaXR0ZXIgPSBuZXcgY29yZV8xLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMucHJldkV2ZW50RW1pdHRlciA9IG5ldyBjb3JlXzEuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5leGl0RXZlbnRFbWl0dGVyID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UucmVnaXN0ZXIodGhpcy5zZWxlY3RvciwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuc2hvd1N0ZXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93aW5nU3RlcCQubmV4dCh0aGlzKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiB8fCB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLm9yZGVyID0gK3RoaXMub3JkZXIgfHwgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0T3JkZXI7XHJcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmIChoaWdobGlnaHRlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LnN0eWxlLnpJbmRleCA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuWl9JTkRFWDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZWxlbWVudHNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5hcHBseVJlbGF0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGludC1yZWxhdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVhfNTAgdHJhbnNmb3JtWV8xMDAnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCAtIHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdExheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1YXzUwJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRUb3AgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgLSB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVlfNTAgdHJhbnNmb3JtWF8xMDAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1ZXzUwJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ25ldXRyYWwnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9IHRoaXMuY3VzdG9tQ3NzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnSW52YWxpZCBoaW50IHBvc2l0aW9uIC0+JyArIHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9wUG9zID0gMDtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93bWUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaGFzTmV4dCA9IHRoaXMuaGludFNlcnZpY2UuaGFzTmV4dCgpO1xyXG4gICAgICAgIHRoaXMuaGFzUHJldiA9IHRoaXMuaGludFNlcnZpY2UuaGFzUHJldigpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmhpZGVTdGVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBoaWdobGlnaHRlZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMCc7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpbnQtcmVsYXRpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93bWUgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5leGl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZXhpdEV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5lbmQoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubmV4dEV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2Uuc2hvd05leHQoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucHJldkV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2Uuc2hvd1ByZXYoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5kaXNhYmxlQ2xpY2sgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGludC1kaXNhYmxlZCcpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmVuYWJsZUNsaWNrID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpbnQtZGlzYWJsZWQnKTtcclxuICAgIH07XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuSW5wdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RvclwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLklucHV0KCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9yZGVyXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuSW5wdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjdXN0b21Dc3NcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcIm5leHRFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcInByZXZFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcImV4aXRFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIFRvdXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6IHZhcmlhYmxlc18xLkhpbnRDb25maWcuSElOVF9UQUcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9XFxcImludHJvLXRvdXItaGludC13cmFwcGVyIHt7dHJhbnNmb3JtQ2xhc3N9fSBzdGVwe3tvcmRlcn19IHt7cG9zaXRpb259fVxcXCJcXG4gICpuZ0lmPVxcXCJzaG93bWVcXFwiIFtuZ1N0eWxlXT1cXFwieyd0b3AnOiB0b3BQb3MrJ3B4JywgJ2xlZnQnOiBsZWZ0UG9zKydweCd9XFxcIiA+XFxuICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlclxcXCIgKm5nSWY9XFxcInRpdGxlXFxcIj57e3RpdGxlfX08L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJmb290ZXJcXFwiPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJuYXZpZ2F0ZS1idG4gcHJldlxcXCIgKm5nSWY9XFxcImhhc1ByZXZcXFwiIChjbGljayk9XFxcInByZXYoKVxcXCI+JiM4NTkyOzwvYT5cXG4gICAgICA8YSBjbGFzcz1cXFwibmF2aWdhdGUtYnRuIG5leHRcXFwiICpuZ0lmPVxcXCJoYXNOZXh0XFxcIiAoY2xpY2spPVxcXCJuZXh0KClcXFwiPiYjODU5NDs8L2E+XFxuICAgICAgPGEgY2xhc3M9XFxcIm5hdmlnYXRlLWJ0biBleGl0XFxcIiAoY2xpY2spPVxcXCJleGl0KClcXFwiPiYjMTAwMDY7PC9hPlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlwiLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2VdKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudCk7XHJcbiAgICByZXR1cm4gVG91ckNvbXBvbmVudDtcclxufSgpKTtcclxuZXhwb3J0cy5Ub3VyQ29tcG9uZW50ID0gVG91ckNvbXBvbmVudDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG91ci5jb21wb25lbnQuanMubWFwXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciB2YXJpYWJsZXNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcbnZhciBIaW50T3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhpbnRPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHNEaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0UG9zaXRpb24gPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUE9TSVRJT047XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0T3JkZXIgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfT1JERVI7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGF5ZXIgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUFhfTEFZRVI7XHJcbiAgICAgICAgdGhpcy5hcHBseVJlbGF0aXZlID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5BUFBMWV9SRUxBVElWRTtcclxuICAgICAgICB0aGlzLnN0ZXBUYWcgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkhJTlRfVEFHO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzc09uT3ZlcmxheSA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuRElTTUlTU19PTl9PVkVSTEFZO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEhpbnRPcHRpb25zO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpbnRPcHRpb25zID0gSGludE9wdGlvbnM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbnMuanMubWFwXG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fO1xuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXztcblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFuZ3VsYXItY3VzdG9tLXRvdXIudW1kLm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbiBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGM2MTVkNTNiOTA1ODRjNTYyNzg4IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBhbmd1bGFyL2NvcmVcIlxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29yZV8xID0gcmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIik7XHJcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpO1xyXG52YXIgb3B0aW9uc18xID0gcmVxdWlyZShcIi4vb3B0aW9uc1wiKTtcclxudmFyIEhpbnRTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGludFNlcnZpY2UoKSB7XHJcbiAgICAgICAgdGhpcy5hbmNob3JzID0ge307XHJcbiAgICAgICAgdGhpcy5vdmVybGF5JCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0cmF0aW9uJCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoJCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xyXG4gICAgICAgIHRoaXMuc2hvd2luZ1N0ZXAkID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgaGludCBzZXJ2aWNlXHJcbiAgICAgKiBAbWV0aG9kIGluaXRpYWxpemVcclxuICAgICAqIEBwYXJhbSAge0hpbnRPcHRpb25zfSBvcHRpb25zIGluaXQgb3B0aW9uc1xyXG4gICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSBuZXcgb3B0aW9uc18xLkhpbnRPcHRpb25zKCk7IH1cclxuICAgICAgICB0aGlzLmhpbnRPcHRpb25zID0gT2JqZWN0LmFzc2lnbihuZXcgb3B0aW9uc18xLkhpbnRPcHRpb25zKCksIG9wdGlvbnMpO1xyXG4gICAgICAgIHZhciBub2RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRoaXMuaGludE9wdGlvbnMuc3RlcFRhZyk7XHJcbiAgICAgICAgdGhpcy5zdGVwcyA9IHRoaXMuaW5pdFN0ZXBzKG5vZGVzKTtcclxuICAgICAgICB0aGlzLnN0YXJ0QXQoMCk7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5JC5uZXh0KHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwXHJcbiAgICAgKiBAbWV0aG9kIHNob3dcclxuICAgICAqIEBwYXJhbSAge1N0ZXB9IHN0ZXAgW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChzdGVwKSB7XHJcbiAgICAgICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yc1tzdGVwLnNlbGVjdG9yXTtcclxuICAgICAgICBpZiAoIWFuY2hvcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuY2hvci5zaG93U3RlcCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwIG5leHQgdG8ge1N0ZXB9IHRoaXMuY3VycmVudFN0ZXBcclxuICAgICAqIEBtZXRob2Qgc2hvd05leHRcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSB0aGlzLnN0ZXBzW3RoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSArIDFdO1xyXG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl07XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbmNob3Iuc2hvd1N0ZXAoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE9uIG92ZXJsYXkgY2xpY2sgYmVoYXZpb3VyXHJcbiAgICAgKiBAbWV0aG9kIG92ZXJsYXlOZXh0XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5vdmVybGF5TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdLmhpZGVTdGVwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05leHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBzdGVwIHByZXZpb3VzIHRvIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwXHJcbiAgICAgKiBAbWV0aG9kIHNob3dQcmV2XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5zaG93UHJldiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1t0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgLSAxXTtcclxuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3JzW3RoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3JdO1xyXG4gICAgICAgIGlmICghYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5jaG9yLnNob3dTdGVwKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlciBoaW50IGNvbXBvbmVudFxyXG4gICAgICogQG1ldGhvZCByZWdpc3RlclxyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgIHNlbGVjdG9yICBiaW5kZWQgdG9cclxuICAgICAqIEBwYXJhbSAge1RvdXJDb21wb25lbnR9IGNvbXBvbmVudCBpdHNlbGZcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5hbmNob3JzW3NlbGVjdG9yXSkge1xyXG4gICAgICAgICAgICB0aHJvdyAnc2VsZWN0b3IgJyArIHNlbGVjdG9yICsgJyBhbHJlYWR5IHJlZ2lzdGVyZWQhJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hbmNob3JzW3NlbGVjdG9yXSA9IGNvbXBvbmVudDtcclxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbiQubmV4dCh0cnVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIElzIHtTdGVwfSB0aGlzLmN1cnJlbnRTdGVwIGhhcyBuZXh0XHJcbiAgICAgKiBAbWV0aG9kIGhhc05leHRcclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzLmluZGV4T2YodGhpcy5jdXJyZW50U3RlcCkgPCB0aGlzLnN0ZXBzLmxlbmd0aCAtIDE7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJcyB7U3RlcH0gdGhpcy5jdXJyZW50U3RlcCBoYXMgcHJldmlvdXNcclxuICAgICAqIEBtZXRob2QgaGFzUHJldlxyXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmhhc1ByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHMuaW5kZXhPZih0aGlzLmN1cnJlbnRTdGVwKSA+IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5hbGl6ZSBvdXIgaGludCB0b3VyLlxyXG4gICAgICogQG1ldGhvZCBlbmRcclxuICAgICAqL1xyXG4gICAgSGludFNlcnZpY2UucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm92ZXJsYXkkLm5leHQoZmFsc2UpO1xyXG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcnNbdGhpcy5jdXJyZW50U3RlcC5zZWxlY3Rvcl07XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGFuY2hvci5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoJC5uZXh0KHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgaGludCB0b3VyIGF0IHNvbWUgcG9zaXRpb25cclxuICAgICAqIEBtZXRob2Qgc3RhcnRBdFxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBzdGVwSWQgcG9zaXRpb24gaW4gdGhpcy5zdGVwc1xyXG4gICAgICovXHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUuc3RhcnRBdCA9IGZ1bmN0aW9uIChzdGVwSWQpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5zdGVwc1tzdGVwSWRdO1xyXG4gICAgICAgIHRoaXMuc2hvdyh0aGlzLmN1cnJlbnRTdGVwKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgRWxlbWVudFtdIHRvIFN0ZXBbXVxyXG4gICAgICogQG1ldGhvZCBpbml0U3RlcHNcclxuICAgICAqIEBwYXJhbSAge05vZGVMaXN0T2Y8RWxlbWVudD59IG5vZGVzXHJcbiAgICAgKiBAcmV0dXJuIHtTdGVwW119XHJcbiAgICAgKi9cclxuICAgIEhpbnRTZXJ2aWNlLnByb3RvdHlwZS5pbml0U3RlcHMgPSBmdW5jdGlvbiAobm9kZXMpIHtcclxuICAgICAgICB2YXIgc3RlcHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN0ZXBzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IG5vZGVzW2ldLmdldEF0dHJpYnV0ZSgnc2VsZWN0b3InKSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiArbm9kZXNbaV0uZ2V0QXR0cmlidXRlKCdvcmRlcicpIHx8IHRoaXMuaGludE9wdGlvbnMuZGVmYXVsdE9yZGVyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0ZXBzID0gc3RlcHMuc29ydChmdW5jdGlvbiAoZWwxLCBlbDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsMS5vcmRlciAtIGVsMi5vcmRlcjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBIaW50U2VydmljZS5wcm90b3R5cGUucHV0T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpO1xyXG4gICAgfTtcclxuICAgIEhpbnRTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLkluamVjdGFibGUoKVxyXG4gICAgXSwgSGludFNlcnZpY2UpO1xyXG4gICAgcmV0dXJuIEhpbnRTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpbnRTZXJ2aWNlID0gSGludFNlcnZpY2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpbnQuc2VydmljZS5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oaW50LnNlcnZpY2UuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcclxuZXhwb3J0cy5IaW50Q29uZmlnID0ge1xyXG4gICAgSElOVF9UQUc6ICd0b3VyLXN0ZXAnLFxyXG4gICAgREVGQVVMVF9QT1NJVElPTjogJ2JvdHRvbScsXHJcbiAgICBaX0lOREVYOiAnOTk5JyxcclxuICAgIERFRkFVTFRfT1JERVI6IDk5LFxyXG4gICAgREVGQVVMVF9QWF9MQVlFUjogMTUsXHJcbiAgICBBUFBMWV9SRUxBVElWRTogdHJ1ZSxcclxuICAgIERJU01JU1NfT05fT1ZFUkxBWTogZmFsc2UsXHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhcmlhYmxlcy5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy92YXJpYWJsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGhpbnRfc2VydmljZV8xID0gcmVxdWlyZShcIi4vaGludC5zZXJ2aWNlXCIpO1xyXG5leHBvcnRzLkhpbnRTZXJ2aWNlID0gaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2U7XHJcbnZhciBjb21tb25fMSA9IHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIik7XHJcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcclxudmFyIGhpbnRfY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9oaW50LmNvbXBvbmVudFwiKTtcclxudmFyIHRvdXJfY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9pbnRyby10b3VyL3RvdXIuY29tcG9uZW50XCIpO1xyXG5leHBvcnRzLlRvdXJDb21wb25lbnQgPSB0b3VyX2NvbXBvbmVudF8xLlRvdXJDb21wb25lbnQ7XHJcbnZhciBIaW50TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGludE1vZHVsZSgpIHtcclxuICAgIH1cclxuICAgIEhpbnRNb2R1bGVfMSA9IEhpbnRNb2R1bGU7XHJcbiAgICBIaW50TW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmdNb2R1bGU6IEhpbnRNb2R1bGVfMSxcclxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgICAgICAgICBoaW50X3NlcnZpY2VfMS5IaW50U2VydmljZSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEhpbnRNb2R1bGUgPSBIaW50TW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuTmdNb2R1bGUoe1xyXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtoaW50X2NvbXBvbmVudF8xLkhpbnRDb21wb25lbnQsIHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudF0sXHJcbiAgICAgICAgICAgIGV4cG9ydHM6IFtoaW50X2NvbXBvbmVudF8xLkhpbnRDb21wb25lbnQsIHRvdXJfY29tcG9uZW50XzEuVG91ckNvbXBvbmVudF0sXHJcbiAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb25fMS5Db21tb25Nb2R1bGVdLFxyXG4gICAgICAgIH0pXHJcbiAgICBdLCBIaW50TW9kdWxlKTtcclxuICAgIHJldHVybiBIaW50TW9kdWxlO1xyXG4gICAgdmFyIEhpbnRNb2R1bGVfMTtcclxufSgpKTtcclxuZXhwb3J0cy5IaW50TW9kdWxlID0gSGludE1vZHVsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0ICogZnJvbSAnLi9zcmMnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9hbmd1bGFyMi10ZW1wbGF0ZS1sb2FkZXIhLi9pbmRleC50cyIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgaGludF9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9oaW50LnNlcnZpY2VcIik7XHJcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcclxudmFyIEhpbnRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIaW50Q29tcG9uZW50KGhpbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmhpbnRTZXJ2aWNlID0gaGludFNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5JC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF90aGlzLnNob3cgPSBkYXRhOyB9KTtcclxuICAgIH1cclxuICAgIEhpbnRDb21wb25lbnQucHJvdG90eXBlLmRpc21pc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGlzbWlzc09uT3ZlcmxheSlcclxuICAgICAgICAgICAgdGhpcy5oaW50U2VydmljZS5vdmVybGF5TmV4dCgpO1xyXG4gICAgfTtcclxuICAgIEhpbnRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXHJcbiAgICAgICAgICAgIHNlbGVjdG9yOiAndG91ci1vdmVybGF5JyxcclxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiaGludC1vdmVybGF5XFxcIiAqbmdJZj1cXFwic2hvd1xcXCIgKGNsaWNrKT1cXFwiZGlzbWlzcygpXFxcIj48L2Rpdj5cIixcclxuICAgICAgICB9KSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW2hpbnRfc2VydmljZV8xLkhpbnRTZXJ2aWNlXSlcclxuICAgIF0sIEhpbnRDb21wb25lbnQpO1xyXG4gICAgcmV0dXJuIEhpbnRDb21wb25lbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSGludENvbXBvbmVudCA9IEhpbnRDb21wb25lbnQ7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpbnQuY29tcG9uZW50LmpzLm1hcFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2hpbnQuY29tcG9uZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29yZV8xID0gcmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIik7XHJcbnZhciBoaW50X3NlcnZpY2VfMSA9IHJlcXVpcmUoXCIuLi9oaW50LnNlcnZpY2VcIik7XHJcbnZhciB2YXJpYWJsZXNfMSA9IHJlcXVpcmUoXCIuLi92YXJpYWJsZXNcIik7XHJcbnZhciBUb3VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVG91ckNvbXBvbmVudChoaW50U2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UgPSBoaW50U2VydmljZTtcclxuICAgICAgICB0aGlzLm5leHRFdmVudEVtaXR0ZXIgPSBuZXcgY29yZV8xLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMucHJldkV2ZW50RW1pdHRlciA9IG5ldyBjb3JlXzEuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5leGl0RXZlbnRFbWl0dGVyID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2UucmVnaXN0ZXIodGhpcy5zZWxlY3RvciwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgVG91ckNvbXBvbmVudC5wcm90b3R5cGUuc2hvd1N0ZXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5zaG93aW5nU3RlcCQubmV4dCh0aGlzKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiB8fCB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLm9yZGVyID0gK3RoaXMub3JkZXIgfHwgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0T3JkZXI7XHJcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmIChoaWdobGlnaHRlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LnN0eWxlLnpJbmRleCA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuWl9JTkRFWDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZWxlbWVudHNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5hcHBseVJlbGF0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGludC1yZWxhdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVhfNTAgdHJhbnNmb3JtWV8xMDAnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCAtIHRoaXMuaGludFNlcnZpY2UuaGludE9wdGlvbnMuZGVmYXVsdExheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1YXzUwJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRUb3AgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgKyBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BQb3MgPSBoaWdobGlnaHRlZEVsZW1lbnQub2Zmc2V0VG9wICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldExlZnQgLSB0aGlzLmhpbnRTZXJ2aWNlLmhpbnRPcHRpb25zLmRlZmF1bHRMYXllcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNsYXNzID0gJ3RyYW5zZm9ybVlfNTAgdHJhbnNmb3JtWF8xMDAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9ICd0cmFuc2Zvcm1ZXzUwJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ25ldXRyYWwnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zID0gaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFRvcCArIGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvcyA9IGhpZ2hsaWdodGVkRWxlbWVudC5vZmZzZXRMZWZ0ICsgaGlnaGxpZ2h0ZWRFbGVtZW50Lm9mZnNldFdpZHRoICsgdGhpcy5oaW50U2VydmljZS5oaW50T3B0aW9ucy5kZWZhdWx0TGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1DbGFzcyA9IHRoaXMuY3VzdG9tQ3NzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnSW52YWxpZCBoaW50IHBvc2l0aW9uIC0+JyArIHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9wUG9zID0gMDtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0UG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93bWUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaGFzTmV4dCA9IHRoaXMuaGludFNlcnZpY2UuaGFzTmV4dCgpO1xyXG4gICAgICAgIHRoaXMuaGFzUHJldiA9IHRoaXMuaGludFNlcnZpY2UuaGFzUHJldigpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmhpZGVTdGVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBoaWdobGlnaHRlZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMCc7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQ2xpY2soaGlnaGxpZ2h0ZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpbnQtcmVsYXRpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93bWUgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5leGl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZXhpdEV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaW50U2VydmljZS5lbmQoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubmV4dEV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2Uuc2hvd05leHQoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucHJldkV2ZW50RW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlU3RlcCgpO1xyXG4gICAgICAgIHRoaXMuaGludFNlcnZpY2Uuc2hvd1ByZXYoKTtcclxuICAgIH07XHJcbiAgICBUb3VyQ29tcG9uZW50LnByb3RvdHlwZS5kaXNhYmxlQ2xpY2sgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGludC1kaXNhYmxlZCcpO1xyXG4gICAgfTtcclxuICAgIFRvdXJDb21wb25lbnQucHJvdG90eXBlLmVuYWJsZUNsaWNrID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpbnQtZGlzYWJsZWQnKTtcclxuICAgIH07XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuSW5wdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RvclwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbXHJcbiAgICAgICAgY29yZV8xLklucHV0KCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9yZGVyXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuSW5wdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5JbnB1dCgpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXHJcbiAgICBdLCBUb3VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjdXN0b21Dc3NcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcIm5leHRFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcInByZXZFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGNvcmVfMS5PdXRwdXQoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgY29yZV8xLkV2ZW50RW1pdHRlcilcclxuICAgIF0sIFRvdXJDb21wb25lbnQucHJvdG90eXBlLCBcImV4aXRFdmVudEVtaXR0ZXJcIiwgdm9pZCAwKTtcclxuICAgIFRvdXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6IHZhcmlhYmxlc18xLkhpbnRDb25maWcuSElOVF9UQUcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9XFxcImludHJvLXRvdXItaGludC13cmFwcGVyIHt7dHJhbnNmb3JtQ2xhc3N9fSBzdGVwe3tvcmRlcn19IHt7cG9zaXRpb259fVxcXCJcXG4gICpuZ0lmPVxcXCJzaG93bWVcXFwiIFtuZ1N0eWxlXT1cXFwieyd0b3AnOiB0b3BQb3MrJ3B4JywgJ2xlZnQnOiBsZWZ0UG9zKydweCd9XFxcIiA+XFxuICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlclxcXCIgKm5nSWY9XFxcInRpdGxlXFxcIj57e3RpdGxlfX08L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJmb290ZXJcXFwiPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJuYXZpZ2F0ZS1idG4gcHJldlxcXCIgKm5nSWY9XFxcImhhc1ByZXZcXFwiIChjbGljayk9XFxcInByZXYoKVxcXCI+JiM4NTkyOzwvYT5cXG4gICAgICA8YSBjbGFzcz1cXFwibmF2aWdhdGUtYnRuIG5leHRcXFwiICpuZ0lmPVxcXCJoYXNOZXh0XFxcIiAoY2xpY2spPVxcXCJuZXh0KClcXFwiPiYjODU5NDs8L2E+XFxuICAgICAgPGEgY2xhc3M9XFxcIm5hdmlnYXRlLWJ0biBleGl0XFxcIiAoY2xpY2spPVxcXCJleGl0KClcXFwiPiYjMTAwMDY7PC9hPlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlwiLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbaGludF9zZXJ2aWNlXzEuSGludFNlcnZpY2VdKVxyXG4gICAgXSwgVG91ckNvbXBvbmVudCk7XHJcbiAgICByZXR1cm4gVG91ckNvbXBvbmVudDtcclxufSgpKTtcclxuZXhwb3J0cy5Ub3VyQ29tcG9uZW50ID0gVG91ckNvbXBvbmVudDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG91ci5jb21wb25lbnQuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW50cm8tdG91ci90b3VyLmNvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdmFyaWFibGVzXzEgPSByZXF1aXJlKFwiLi92YXJpYWJsZXNcIik7XHJcbnZhciBIaW50T3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhpbnRPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHNEaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0UG9zaXRpb24gPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUE9TSVRJT047XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0T3JkZXIgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfT1JERVI7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGF5ZXIgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkRFRkFVTFRfUFhfTEFZRVI7XHJcbiAgICAgICAgdGhpcy5hcHBseVJlbGF0aXZlID0gdmFyaWFibGVzXzEuSGludENvbmZpZy5BUFBMWV9SRUxBVElWRTtcclxuICAgICAgICB0aGlzLnN0ZXBUYWcgPSB2YXJpYWJsZXNfMS5IaW50Q29uZmlnLkhJTlRfVEFHO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzc09uT3ZlcmxheSA9IHZhcmlhYmxlc18xLkhpbnRDb25maWcuRElTTUlTU19PTl9PVkVSTEFZO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEhpbnRPcHRpb25zO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpbnRPcHRpb25zID0gSGludE9wdGlvbnM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbnMuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvb3B0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvY29tbW9uXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzlfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInJ4anMvU3ViamVjdFwiXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=